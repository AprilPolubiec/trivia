/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={402:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(645),i=n.n(r)()((function(t){return t[1]}));i.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Oswald:wght@100;200;300;400;700&family=Roboto:wght@100;300;900&display=swap);"]),i.push([t.id,':root {\n  --main-bg-color: #232752;\n  --light-blue: #07ffdb;\n  --light-yellow: #ffdf2b;\n  --dark-yellow: #ffbd59;\n  --light-purple: #a542f7;\n  --dark-purple: #883bc8;\n}\n\nbody {\n  height: 100vh;\n  width: 100vw;\n  background-color: var(--main-bg-color);\n  font-family: "Roboto", sans-serif;\n  font-weight: 300;\n  color: #fff;\n}\n\n#logo {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  text-align: center;\n  color: var(--light-blue);\n  font-family: "Oswald", sans-serif;\n  font-size: 2.5rem;\n}\n\n#subtitle {\n  text-transform: uppercase;\n  margin-bottom: 1rem;\n  font-family: "Oswald";\n}\n\n#container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  flex-direction: column;\n}\n\n#landing {\n  padding: 3rem;\n  max-width: 600px;\n  display: flex;\n  flex-direction: column;\n  height: 600px;\n  justify-content: space-around;\n}\n\n#game-code-container {\n  display: flex;\n  align-items: center;\n}\n\n.separator {\n  font-size: 3rem;\n  margin: 0 1rem;\n  text-align: center;\n}\n\n#timer {\n  color: var(--light-yellow);\n  font-size: 5rem;\n  font-family: "Roboto", sans-serif;\n  font-weight: 900;\n}\n\n#question-container {\n  background-color: var(--light-purple);\n  color: #fff;\n}\n\ninput,\nbutton,\n.btn,\n.btn:active,\n.btn:visited {\n  outline: none;\n  background-color: var(--dark-purple);\n  color: #fff;\n  border-color: var(--dark-purple);\n  padding: 2rem;\n  min-width: 200px;\n  font-family: "Oswald";\n  text-align: center;\n}\n\n#landing input {\n  font-size: 3rem;\n  padding: 0 1rem;\n  background: none;\n  text-transform: uppercase;\n}\n\nbutton:hover,\n.btn:hover,\n#player-list li.checked,\n.checked,\n.btn-group-vertical label:hover,\n.btn-check:active + .btn-outline-primary,\n.btn-check:checked + .btn-outline-primary,\n.btn-outline-primary.active,\n.btn-outline-primary.dropdown-toggle.show,\n.btn-outline-primary:active {\n  background-color: var(--dark-yellow);\n  color: #fff;\n  border-color: var(--dark-yellow);\n}\n\n::placeholder,\n:-ms-input-placeholder,\n::-ms-input-placeholder {\n  /* Chrome, Firefox, Opera, Safari 10.1+ */\n  color: #fff;\n  opacity: 0.5; /* Firefox */\n}\n\n#game-id {\n  color: var(--light-yellow);\n  font-size: 5rem;\n  font-family: "Oswald", sans-serif;\n  font-weight: 700;\n}\n\n#error {\n  color: var(--light-yellow);\n}\n\n#exit {\n  position: absolute;\n  bottom: 1rem;\n  left: 1rem;\n  font-size: 1.5rem;\n  color: var(--light-blue);\n  opacity: 0.3;\n  cursor: pointer;\n}\n\n#exit:hover {\n  opacity: 1;\n}\n\n#lobby {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 60px;\n  align-items: center;\n}\n\n#player-list {\n  height: 45vh;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  padding-left: 0;\n  width: 70vw;\n  align-items: center;\n}\n\n#player-list li {\n  background-color: var(--light-purple);\n  color: #fff;\n  margin: 0.5rem;\n  display: flex;\n  justify-content: space-around;\n  padding: 1rem;\n  border-radius: 27px;\n  font-size: 1.5rem;\n  text-transform: uppercase;\n  width: 200px;\n}\n\n#player-list li .score {\n  color: var(--light-yellow);\n}\n\n.btn-group-vertical {\n  width: 70vw;\n  padding: 2rem;\n  align-items: center;\n}\n\n.btn-group-vertical > .btn,\n.btn-group-vertical > .btn-group {\n  background-color: var(--dark-purple);\n  border-color: var(--dark-purple);\n  color: #fff;\n  padding: 1rem;\n  border-radius: 20px;\n  width: 200px;\n  border: 1px solid var(--light-purple);\n}\n\n.btn-group-vertical > .question-text {\n  font-family: "Oswald", sans-serif;\n  font-size: 1.25rem;\n  font-weight: 300;\n  margin-bottom: 1rem;\n}\n\n.btn-group-vertical * {\n  /* font-family: "Roboto", sans-serif; */\n  font-weight: 300;\n}\n',""]);const o=i},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<t.length;a++){var u=[].concat(t[a]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},324:t=>{var e=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"];function n(t){function n(){return t&&t.maxLength>1?function(){for(var e,n=!1;!n;)(e=r()).length<=t.maxLength&&(n=!0);return e}():r()}function r(){return e[i(e.length)]}function i(t){return Math.floor(Math.random()*t)}if(void 0===t)return n();"number"==typeof t&&(t={exactly:t}),t.exactly&&(t.min=t.exactly,t.max=t.exactly),"number"!=typeof t.wordsPerString&&(t.wordsPerString=1),"function"!=typeof t.formatter&&(t.formatter=t=>t),"string"!=typeof t.separator&&(t.separator=" ");for(var o=t.min+i(t.max+1-t.min),s=[],a="",u=0,c=0;c<o*t.wordsPerString;c++)u===t.wordsPerString-1?a+=t.formatter(n(),u):a+=t.formatter(n(),u)+t.separator,u++,(c+1)%t.wordsPerString==0&&(s.push(a),a="",u=0);return"string"==typeof t.join&&(s=s.join(t.join)),s}t.exports=n,n.wordList=e},379:(t,e,n)=>{"use strict";var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function s(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function a(t,e){for(var n={},r=[],i=0;i<t.length;i++){var a=t[i],u=e.base?a[0]+e.base:a[0],c=n[u]||0,h="".concat(u," ").concat(c);n[u]=c+1;var f=s(h),l={css:a[1],media:a[2],sourceMap:a[3]};-1!==f?(o[f].references++,o[f].updater(l)):o.push({identifier:h,updater:v(l,e),references:1}),r.push(h)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var s=i(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var c,h=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function f(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=h(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function l(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,d=0;function v(t,e){var n,r,i;if(e.singleton){var o=d++;n=p||(p=u(e)),r=f.bind(null,n,o,!1),i=f.bind(null,n,o,!0)}else n=u(e),r=l.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=s(n[r]);o[i].references--}for(var u=a(t,e),c=0;c<n.length;c++){var h=s(n[c]);0===o[h].references&&(o[h].updater(),o.splice(h,1))}n=u}}}}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";var t=n(379),e=n.n(t),r=n(402);e()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function f(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}function l(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function p(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=p(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function v(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function y(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}var m=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,g.prototype.create),o}return o(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?b(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new m(i,a,r);return u},t}();function b(t,e){return t.replace(w,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var w=/\{\$([^}]+)}/g;function _(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t,e){var n=new I(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782),i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295,f=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var I=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function T(){}var k,x=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),N="[DEFAULT]",S=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=N);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new d;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=s({identifier:N,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(N)}catch(t){}try{for(var r=c(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=h(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var f=this.getOrInitializeService(u);a.resolve(f)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=N),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return a(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(f(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===N?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:N:t},t}(),A=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new S(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function O(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var D,C=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(D||(D={}));var P,L={debug:D.DEBUG,verbose:D.VERBOSE,info:D.INFO,warn:D.WARN,error:D.ERROR,silent:D.SILENT},R=D.INFO,M=((k={})[D.DEBUG]="log",k[D.VERBOSE]="log",k[D.INFO]="info",k[D.WARN]="warn",k[D.ERROR]="error",k),j=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=M[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,O(["["+i+"]  "+t.name+":"],n))}},V=function(){function t(t){this.name=t,this._logLevel=R,this._logHandler=j,this._userLogHandler=null,C.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in D))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?L[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,O([this,D.DEBUG],t)),this._logHandler.apply(this,O([this,D.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,O([this,D.VERBOSE],t)),this._logHandler.apply(this,O([this,D.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,O([this,D.INFO],t)),this._logHandler.apply(this,O([this,D.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,O([this,D.WARN],t)),this._logHandler.apply(this,O([this,D.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,O([this,D.ERROR],t)),this._logHandler.apply(this,O([this,D.ERROR],t))},t}();function U(t){C.forEach((function(e){e.setLogLevel(t)}))}var q,F=((P={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",P["bad-app-name"]="Illegal App name: '{$appName}",P["duplicate-app"]="Firebase App named '{$appName}' already exists",P["app-deleted"]="Firebase App named '{$appName}' already deleted",P["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",P["invalid-log-argument"]="First argument to `onLog` must be null or a function.",P),z=new g("app","Firebase",F),H="@firebase/app",B="[DEFAULT]",G=((q={})[H]="fire-core",q["@firebase/analytics"]="fire-analytics",q["@firebase/auth"]="fire-auth",q["@firebase/database"]="fire-rtdb",q["@firebase/functions"]="fire-fn",q["@firebase/installations"]="fire-iid",q["@firebase/messaging"]="fire-fcm",q["@firebase/performance"]="fire-perf",q["@firebase/remote-config"]="fire-rc",q["@firebase/storage"]="fire-gcs",q["@firebase/firestore"]="fire-fst",q["fire-js"]="fire-js",q["firebase-wrapper"]="fire-js-all",q),K=new V("@firebase/app"),J=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=p(void 0,t),this.container=new A(e.name),this._addComponent(new x("app",(function(){return o}),"PUBLIC"));try{for(var s=c(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=B),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=B),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){K.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw z.create("app-deleted",{appName:this.name_})},t}();J.prototype.name&&J.prototype.options||J.prototype.delete||console.log("dc");var W=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=B);var s=o.name;if("string"!=typeof s||!s)throw z.create("bad-app-name",{appName:String(s)});if(_(e,s))throw z.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=G[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void K.warn(u.join(" "))}o(new x(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:U,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw z.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=L[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:D[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=C;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!_(e,t=t||B))throw z.create("no-app",{appName:t});return e[t]}function o(o){var s,a,u=o.name;if(n.has(u))return K.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var h=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw z.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&p(h,o.serviceProps),r[u]=h,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,u).apply(this,o.multipleInstances?t:[])}}try{for(var f=c(Object.keys(e)),l=f.next();!l.done;l=f.next()){var d=l.value;e[d]._addComponent(o)}}catch(t){s={error:t}}finally{try{l&&!l.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(J);return e.INTERNAL=s(s({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){p(e,t)},createSubscribe:E,ErrorFactory:g,deepExtend:p}),e}(),Y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){K.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var X=self.firebase.SDK_VERSION;X&&X.indexOf("LITE")>=0&&K.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Q=W.initializeApp;W.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return y()&&K.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Q.apply(void 0,t)};var Z=W;!function(t,e){t.INTERNAL.registerComponent(new x("platform-logger",(function(t){return new Y(t)}),"PRIVATE")),t.registerVersion(H,"0.6.13",void 0),t.registerVersion("fire-js","")}(Z);const tt=Z;tt.registerVersion("firebase","8.2.2","app");var et=function(t,e){return(et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function nt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var rt,it="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},ot=ot||{},st=it||self;function at(){}function ut(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ct(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ht="closure_uid_"+(1e9*Math.random()>>>0),ft=0;function lt(t,e,n){return t.call.apply(t.bind,arguments)}function pt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function dt(t,e,n){return(dt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lt:pt).apply(null,arguments)}function vt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function yt(){return Date.now()}function mt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function gt(){this.j=this.j,this.i=this.i}gt.prototype.j=!1,gt.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,ht)&&t[ht]||(t[ht]=++ft)}(this)},gt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var bt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},wt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function _t(t){return Array.prototype.concat.apply([],arguments)}function Et(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function It(t){return/^[\s\xa0]*$/.test(t)}var Tt,kt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function xt(t,e){return-1!=t.indexOf(e)}function Nt(t,e){return t<e?-1:t>e?1:0}t:{var St=st.navigator;if(St){var At=St.userAgent;if(At){Tt=At;break t}}Tt=""}function Ot(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Dt(t){var e={};for(var n in t)e[n]=t[n];return e}var Ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ct.length;o++)n=Ct[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Lt(t){return Lt[" "](t),t}Lt[" "]=at;var Rt,Mt,jt=xt(Tt,"Opera"),Vt=xt(Tt,"Trident")||xt(Tt,"MSIE"),Ut=xt(Tt,"Edge"),qt=Ut||Vt,Ft=xt(Tt,"Gecko")&&!(xt(Tt.toLowerCase(),"webkit")&&!xt(Tt,"Edge"))&&!(xt(Tt,"Trident")||xt(Tt,"MSIE"))&&!xt(Tt,"Edge"),zt=xt(Tt.toLowerCase(),"webkit")&&!xt(Tt,"Edge");function Ht(){var t=st.document;return t?t.documentMode:void 0}t:{var Bt="",Gt=(Mt=Tt,Ft?/rv:([^\);]+)(\)|;)/.exec(Mt):Ut?/Edge\/([\d\.]+)/.exec(Mt):Vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Mt):zt?/WebKit\/(\S+)/.exec(Mt):jt?/(?:Version)[ \/]?(\S+)/.exec(Mt):void 0);if(Gt&&(Bt=Gt?Gt[1]:""),Vt){var Kt=Ht();if(null!=Kt&&Kt>parseFloat(Bt)){Rt=String(Kt);break t}}Rt=Bt}var Jt,Wt={};function Yt(t){return function(t,e){var n=Wt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=kt(String(Rt)).split("."),r=kt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Nt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Nt(0==s[2].length,0==a[2].length)||Nt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}st.document&&Vt?Jt=Ht()||parseInt(Rt,10)||void 0:Jt=void 0;var Xt=Jt,$t=!Vt||9<=Number(Xt),Qt=Vt&&!Yt("9"),Zt=function(){if(!st.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{st.addEventListener("test",at,e),st.removeEventListener("test",at,e)}catch(t){}return t}();function te(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ee(t,e){if(te.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ft){t:{try{Lt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ne[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}te.prototype.b=function(){this.defaultPrevented=!0},mt(ee,te);var ne={2:"touch",3:"pen",4:"mouse"};ee.prototype.b=function(){ee.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Qt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var re="closure_listenable_"+(1e6*Math.random()|0),ie=0;function oe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ie,this.Y=this.Z=!1}function se(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ae(t){this.src=t,this.a={},this.b=0}function ue(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=bt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(se(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ce(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ae.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ce(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new oe(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var he="closure_lm_"+(1e6*Math.random()|0),fe={};function le(t,e,n,r,i){if(r&&r.once)return de(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)le(t,e[o],n,r,i);return null}return n=Ee(n),t&&t[re]?t.va(e,n,ct(r)?!!r.capture:!!r,i):pe(t,e,n,!1,r,i)}function pe(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ct(i)?!!i.capture:!!i;if(s&&!$t)return null;var a=we(t);if(a||(t[he]=a=new ae(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=be,e=$t?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Zt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(me(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function de(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)de(t,e[o],n,r,i);return null}return n=Ee(n),t&&t[re]?t.wa(e,n,ct(r)?!!r.capture:!!r,i):pe(t,e,n,!0,r,i)}function ve(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ve(t,e[o],n,r,i);else r=ct(r)?!!r.capture:!!r,n=Ee(n),t&&t[re]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ce(o=t.a[e],n,r,i))&&(se(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=we(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ce(e,n,r,i)),(n=-1<t?e[t]:null)&&ye(n))}function ye(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[re])ue(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(me(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=we(e))?(ue(n,t),0==n.b&&(n.src=null,e[he]=null)):se(t)}}}function me(t){return t in fe?fe[t]:fe[t]="on"+t}function ge(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ye(t),n.call(r,e)}function be(t,e){if(t.Y)return!0;if(!$t){if(!e)t:{e=["window","event"];for(var n=st,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ge(t,e=new ee(e,this))}return ge(t,new ee(e,this))}function we(t){return(t=t[he])instanceof ae?t:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ee(t){return"function"==typeof t?t:(t[_e]||(t[_e]=function(e){return t.handleEvent(e)}),t[_e])}function Ie(){gt.call(this),this.c=new ae(this),this.J=this,this.C=null}function Te(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new te(e,t);else if(e instanceof te)e.target=e.target||t;else{var i=e;Pt(e=new te(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=ke(s,r,!0,e)&&i}if(i=ke(s=e.a=t,r,!0,e)&&i,i=ke(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ke(s=e.a=n[o],r,!1,e)&&i}function ke(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ue(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}mt(Ie,gt),Ie.prototype[re]=!0,(rt=Ie.prototype).addEventListener=function(t,e,n,r){le(this,t,e,n,r)},rt.removeEventListener=function(t,e,n,r){ve(this,t,e,n,r)},rt.G=function(){if(Ie.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)se(n[r]);delete e.a[t],e.b--}}this.C=null},rt.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},rt.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var xe=st.JSON.stringify;function Ne(){this.b=this.a=null}var Se,Ae=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new De}),(function(t){t.reset()}));function Oe(){var t=Re,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function De(){this.next=this.b=this.a=null}function Ce(t){st.setTimeout((function(){throw t}),0)}function Pe(t,e){Se||function(){var t=st.Promise.resolve(void 0);Se=function(){t.then(Me)}}(),Le||(Se(),Le=!0),Re.add(t,e)}Ne.prototype.add=function(t,e){var n=Ae.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},De.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},De.prototype.reset=function(){this.next=this.b=this.a=null};var Le=!1,Re=new Ne;function Me(){for(var t;t=Oe();){try{t.a.call(t.b)}catch(t){Ce(t)}var e=Ae;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Le=!1}function je(t,e){Ie.call(this),this.b=t||1,this.a=e||st,this.f=dt(this.Za,this),this.g=yt()}function Ve(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ue(t,e,n){if("function"==typeof t)n&&(t=dt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=dt(t.handleEvent,t)}return 2147483647<Number(e)?-1:st.setTimeout(t,e||0)}function qe(t){t.a=Ue((function(){t.a=null,t.c&&(t.c=!1,qe(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}mt(je,Ie),(rt=je.prototype).aa=!1,rt.M=null,rt.Za=function(){if(this.aa){var t=yt()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Te(this,"tick"),this.aa&&(Ve(this),this.start()))}},rt.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=yt())},rt.G=function(){je.X.G.call(this),Ve(this),delete this.a};var Fe=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}et(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:qe(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(st.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(gt);function ze(t){gt.call(this),this.b=t,this.a={}}mt(ze,gt);var He=[];function Be(t,e,n,r){Array.isArray(n)||(n&&(He[0]=n.toString()),n=He);for(var i=0;i<n.length;i++){var o=le(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ge(t){Ot(t.a,(function(t,e){this.a.hasOwnProperty(e)&&ye(t)}),t),t.a={}}function Ke(){this.a=!0}function Je(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return xe(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}ze.prototype.G=function(){ze.X.G.call(this),Ge(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ke.prototype.info=function(){};var We={},Ye=null;function Xe(){return Ye=Ye||new Ie}function $e(t){te.call(this,We.Fa,t)}function Qe(t){var e=Xe();Te(e,new $e(e,t))}function Ze(t,e){te.call(this,We.STAT_EVENT,t),this.stat=e}function tn(t){var e=Xe();Te(e,new Ze(e,t))}function en(t){te.call(this,We.Ga,t)}function nn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return st.setTimeout((function(){t()}),e)}We.Fa="serverreachability",mt($e,te),We.STAT_EVENT="statevent",mt(Ze,te),We.Ga="timingevent",mt(en,te);var rn={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},on={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function sn(){}function an(t){var e;return(e=t.a)||(e=t.a={}),e}function un(){}sn.prototype.a=null;var cn,hn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function fn(){te.call(this,"d")}function ln(){te.call(this,"c")}function pn(){}function dn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ze(this),this.P=vn,t=qt?125:void 0,this.R=new je(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}mt(fn,te),mt(ln,te),mt(pn,sn),cn=new pn;var vn=45e3,yn={},mn={};function gn(t,e,n){t.H=1,t.i=qn(Ln(e)),t.j=n,t.I=!0,bn(t,null)}function bn(t,e){t.u=yt(),En(t),t.l=Ln(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Zn(n.b,"t",r),t.D=0,t.a=Jr(t.g,t.g.C?e:null),0<t.O&&(t.F=new Fe(dt(t.Ca,t,t.a),t.O)),Be(t.J,t.a,"readystatechange",t.Xa),e=t.B?Dt(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Qe(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function wn(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=_n(t,n);if(i==mn){4==e&&(t.h=4,tn(14),r=!1),Je(t.c,t.f,null,"[Incomplete Response]");break}if(i==yn){t.h=4,tn(15),Je(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Je(t.c,t.f,i,null),Nn(t,i)}4==e&&0==n.length&&(t.h=1,tn(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ur(e),e.F=!0,tn(11))):(Je(t.c,t.f,n,"[Invalid Chunked Response]"),xn(t),kn(t))}function _n(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?mn:(n=Number(e.substring(n,r)),isNaN(n)?yn:(r+=1)+n>e.length?mn:(e=e.substr(r,n),t.D=r+n,e))}function En(t){t.T=yt()+t.P,In(t,t.P)}function In(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=nn(dt(t.Va,t),e)}function Tn(t){t.o&&(st.clearTimeout(t.o),t.o=null)}function kn(t){0==t.g.v||t.A||zr(t.g,t)}function xn(t){Tn(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ve(t.R),Ge(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Nn(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||sr(n.b,t)))if(n.I=t.N,!t.C&&sr(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Fr(n),Or(n)}Vr(n),tn(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=nn(dt(n.Sa,n),6e3));if(1>=or(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Br(n,11)}else if((t.C||n.a==t)&&Fr(n),!It(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=u.b;!f.a&&(xt(h,"spdy")||xt(h,"quic")||xt(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(ar(f,f.b),f.b=null))}if(u.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(u.na=l,Un(u.B,u.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=yt()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Kr(u,u.C?u.ga:null,u.fa),p.C){ur(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Tn(d),En(d)),u.a=p}else jr(u);0<n.g.length&&Pr(n)}else"stop"!=i[0]&&"close"!=i[0]||Br(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Br(n,7):Ar(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Qe(4)}catch(t){}}function Sn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ut(t)||"string"==typeof t)wt(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ut(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ut(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function An(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof An)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function On(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Dn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(rt=dn.prototype).setTimeout=function(t){this.P=t},rt.Xa=function(t){t=t.target;var e=this.F;e&&3==kr(t)?e.f():this.Ca(t)},rt.Ca=function(t){try{if(t==this.a)t:{var e=kr(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!qt&&!this.a.$())){this.A||4!=e||7==n||Qe(8==n||0>=r?3:2),Tn(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!It(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,tn(12),xn(this),kn(this);break t}Je(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Nn(this,u)}this.I?(wn(this,e,o),qt&&this.b&&3==e&&(Be(this.J,this.R,"tick",this.Wa),this.R.start())):(Je(this.c,this.f,o,null),Nn(this,o)),4==e&&xn(this),this.b&&!this.A&&(4==e?zr(this.g,this):(this.b=!1,En(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,tn(12)):(this.h=0,tn(13)),xn(this),kn(this)}}}catch(t){}},rt.Wa=function(){if(this.a){var t=kr(this.a),e=this.a.$();this.D<e.length&&(Tn(this),wn(this,t,e),this.b&&4!=t&&En(this))}},rt.cancel=function(){this.A=!0,xn(this)},rt.Va=function(){this.o=null;var t=yt();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Qe(3),tn(17)),xn(this),this.h=2,kn(this)):In(this,this.T-t)},(rt=An.prototype).K=function(){On(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},rt.L=function(){return On(this),this.a.concat()},rt.get=function(t,e){return Dn(this.b,t)?this.b[t]:e},rt.set=function(t,e){Dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},rt.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Cn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Pn){this.a=void 0!==e?e:t.a,Rn(this,t.f),this.j=t.j,Mn(this,t.c),jn(this,t.h),this.g=t.g,e=t.b;var n=new Yn;n.c=e.c,e.a&&(n.a=new An(e.a),n.b=e.b),Vn(this,n),this.i=t.i}else t&&(n=String(t).match(Cn))?(this.a=!!e,Rn(this,n[1]||"",!0),this.j=Fn(n[2]||""),Mn(this,n[3]||"",!0),jn(this,n[4]),this.g=Fn(n[5]||"",!0),Vn(this,n[6]||"",!0),this.i=Fn(n[7]||"")):(this.a=!!e,this.b=new Yn(null,this.a))}function Ln(t){return new Pn(t)}function Rn(t,e,n){t.f=n?Fn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Mn(t,e,n){t.c=n?Fn(e,!0):e}function jn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Vn(t,e,n){e instanceof Yn?(t.b=e,function(t,e){e&&!t.f&&(Xn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($n(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=zn(e,Jn)),t.b=new Yn(e,t.a))}function Un(t,e,n){t.b.set(e,n)}function qn(t){return Un(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^yt()).toString(36)),t}function Fn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(zn(e,Bn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(zn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(zn(n,"/"==n.charAt(0)?Kn:Gn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",zn(n,Wn)),t.join("")};var Bn=/[#\/\?@]/g,Gn=/[#\?:]/g,Kn=/[#\?]/g,Jn=/[#\?@]/g,Wn=/#/g;function Yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Xn(t){t.a||(t.a=new An,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $n(t,e){Xn(t),e=tr(t,e),Dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&On(t)))}function Qn(t,e){return Xn(t),e=tr(t,e),Dn(t.a.b,e)}function Zn(t,e,n){$n(t,e),0<n.length&&(t.c=null,t.a.set(tr(t,e),Et(n)),t.b+=n.length)}function tr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(rt=Yn.prototype).add=function(t,e){Xn(this),this.c=null,t=tr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},rt.forEach=function(t,e){Xn(this),this.a.forEach((function(n,r){wt(n,(function(n){t.call(e,n,r,this)}),this)}),this)},rt.L=function(){Xn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},rt.K=function(t){Xn(this);var e=[];if("string"==typeof t)Qn(this,t)&&(e=_t(e,this.a.get(tr(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=_t(e,t[n])}return e},rt.set=function(t,e){return Xn(this),this.c=null,Qn(this,t=tr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},rt.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},rt.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var er=function(t,e){this.b=t,this.a=e};function nr(t){this.g=t||rr,t=st.PerformanceNavigationTiming?0<(t=st.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(st.ia&&st.ia.ya&&st.ia.ya()&&st.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var rr=10;function ir(t){return!!t.b||!!t.a&&t.a.size>=t.f}function or(t){return t.b?1:t.a?t.a.size:0}function sr(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ar(t,e){t.a?t.a.add(e):t.b=e}function ur(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function cr(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=nt(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Et(t.c)}function hr(){}function fr(){this.a=new hr}function lr(t,e,n){var r=n||"";try{Sn(t,(function(t,n){var i=t;ct(t)&&(i=xe(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function pr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}nr.prototype.cancel=function(){var t,e;if(this.c=cr(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=nt(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},hr.prototype.stringify=function(t){return st.JSON.stringify(t,void 0)},hr.prototype.parse=function(t){return st.JSON.parse(t,void 0)};var dr=st.JSON.parse;function vr(t){Ie.call(this),this.headers=new An,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=yr,this.D=this.F=!1}mt(vr,Ie);var yr="",mr=/^https?$/i,gr=["POST","PUT"];function br(t){return"content-type"==t.toLowerCase()}function wr(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,_r(t),Ir(t)}function _r(t){t.u||(t.u=!0,Te(t,"complete"),Te(t,"error"))}function Er(t){if(t.b&&void 0!==ot&&(!t.s[1]||4!=kr(t)||2!=t.W()))if(t.l&&4==kr(t))Ue(t.za,0,t);else if(Te(t,"readystatechange"),4==kr(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Cn)[1]||null;if(!o&&st.self&&st.self.location){var s=st.self.location.protocol;o=s.substr(0,s.length-1)}i=!mr.test(o?o.toLowerCase():"")}e=i}if(e)Te(t,"complete"),Te(t,"success");else{t.h=6;try{var a=2<kr(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",_r(t)}}finally{Ir(t)}}}function Ir(t,e){if(t.a){Tr(t);var n=t.a,r=t.s[0]?at:null;t.a=null,t.s=null,e||Te(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Tr(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(st.clearTimeout(t.m),t.m=null)}function kr(t){return t.a?t.a.readyState:0}function xr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ot(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Un(t,e,n))}function Nr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sr(t){this.pa=0,this.g=[],this.c=new Ke,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Nr("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Nr("baseRetryDelayMs",5e3,t),this.Ra=Nr("retryDelaySeedMs",1e4,t),this.Ma=Nr("forwardChannelMaxRetries",2,t),this.ma=Nr("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new nr(t&&t.concurrentRequestLimit),this.ka=new fr,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Ar(t){if(Dr(t),3==t.v){var e=t.R++,n=Ln(t.B);Un(n,"SID",t.J),Un(n,"RID",e),Un(n,"TYPE","terminate"),Rr(t,n),(e=new dn(t,t.c,e,void 0)).H=2,e.i=qn(Ln(n)),n=!1,st.navigator&&st.navigator.sendBeacon&&(n=st.navigator.sendBeacon(e.i.toString(),"")),!n&&st.Image&&((new Image).src=e.i,n=!0),n||(e.a=Jr(e.g,null),e.a.ba(e.i)),e.u=yt(),En(e)}Gr(t)}function Or(t){t.a&&(Ur(t),t.a.cancel(),t.a=null)}function Dr(t){Or(t),t.j&&(st.clearTimeout(t.j),t.j=null),Fr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&st.clearTimeout(t.h),t.h=null)}function Cr(t,e){t.g.push(new er(t.Oa++,e)),3==t.v&&Pr(t)}function Pr(t){ir(t.b)||t.h||(t.h=!0,Pe(t.Ba,t),t.u=0)}function Lr(t,e){var n;n=e?e.f:t.R++;var r=Ln(t.B);Un(r,"SID",t.J),Un(r,"RID",n),Un(r,"AID",t.P),Rr(t,r),t.i&&t.l&&xr(r,t.i,t.l),n=new dn(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Mr(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ar(t.b,n),gn(n,r,e)}function Rr(t,e){t.f&&Sn({},(function(t,n){Un(e,n,t)}))}function Mr(t,e,n){n=Math.min(t.g.length,n);var r=t.f?dt(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{lr(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function jr(t){t.a||t.j||(t.T=1,Pe(t.Aa,t),t.o=0)}function Vr(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=nn(dt(t.Aa,t),Hr(t,t.o)),t.o++,0))}function Ur(t){null!=t.s&&(st.clearTimeout(t.s),t.s=null)}function qr(t){t.a=new dn(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ln(t.la);Un(e,"RID","rpc"),Un(e,"SID",t.J),Un(e,"CI",t.H?"0":"1"),Un(e,"AID",t.P),Rr(t,e),Un(e,"TYPE","xmlhttp"),t.i&&t.l&&xr(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=qn(Ln(e)),n.j=null,n.I=!0,bn(n,t)}function Fr(t){null!=t.m&&(st.clearTimeout(t.m),t.m=null)}function zr(t,e){var n=null;if(t.a==e){Fr(t),Ur(t),t.a=null;var r=2}else{if(!sr(t.b,e))return;n=e.s,ur(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=yt()-e.u;var i=t.u;Te(r=Xe(),new en(r,n,e,i)),Pr(t)}else jr(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(or(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=nn(dt(t.Ba,t,e),Hr(t,t.u)),t.u++,0)))}(t,e)||2==r&&Vr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Br(t,5);break;case 4:Br(t,10);break;case 3:Br(t,6);break;default:Br(t,2)}}function Hr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Br(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=dt(t.Ya,t);n||(n=new Pn("//www.google.com/images/cleardot.gif"),st.location&&"http"==st.location.protocol||Rn(n,"https"),qn(n)),function(t,e){var n=new Ke;if(st.Image){var r=new Image;r.onload=vt(pr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=vt(pr,n,r,"TestLoadImage: error",!1,e),r.onabort=vt(pr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=vt(pr,n,r,"TestLoadImage: timeout",!1,e),st.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else tn(2);t.v=0,t.f&&t.f.ra(e),Gr(t),Dr(t)}function Gr(t){t.v=0,t.I=-1,t.f&&(0==cr(t.b).length&&0==t.g.length||(t.b.c.length=0,Et(t.g),t.g.length=0),t.f.qa())}function Kr(t,e,n){var r=function(t){return t instanceof Pn?Ln(t):new Pn(t,void 0)}(n);if(""!=r.c)e&&Mn(r,e+"."+r.c),jn(r,r.h);else{var i=st.location;r=function(t,e,n,r){var i=new Pn(null,void 0);return t&&Rn(i,t),e&&Mn(i,e),n&&jn(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ot(t.V,(function(t,e){Un(r,e,t)})),e=t.A,n=t.na,e&&n&&Un(r,e,n),Un(r,"VER",t.ha),Rr(t,r),r}function Jr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vr(t.Na)).F=t.C,e}function Wr(){}function Yr(){if(Vt&&!(10<=Number(Xt)))throw Error("Environmental error: no available transport.")}function Xr(t,e){Ie.call(this),this.a=new Sr(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!It(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!It(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Zr(this)}function $r(t){fn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Qr(){ln.call(this),this.status=1}function Zr(t){this.a=t}(rt=vr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?an(this.H):an(cn),this.a.onreadystatechange=dt(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void wr(this,t)}t=n||"";var i=new An(this.headers);r&&Sn(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=br,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=st.FormData&&t instanceof st.FormData,!(0<=bt(gr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Tr(this),0<this.o&&((this.D=function(t){return Vt&&Yt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=dt(this.xa,this)):this.m=Ue(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){wr(this,t)}},rt.xa=function(){void 0!==ot&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Te(this,"timeout"),this.abort(8))},rt.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Te(this,"complete"),Te(this,"abort"),Ir(this))},rt.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ir(this,!0)),vr.X.G.call(this)},rt.za=function(){this.j||(this.A||this.l||this.g?Er(this):this.Ua())},rt.Ua=function(){Er(this)},rt.W=function(){try{return 2<kr(this)?this.a.status:-1}catch(t){return-1}},rt.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},rt.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dr(e)}},rt.ua=function(){return this.h},rt.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(rt=Sr.prototype).ha=8,rt.v=1,rt.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new dn(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Pt(r=Dt(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Mr(this,n,e),Un(i=Ln(this.B),"RID",t),Un(i,"CVER",22),this.A&&Un(i,"X-HTTP-Session-Id",this.A),Rr(this,i),this.i&&r&&xr(i,this.i,r),ar(this.b,n),this.Ia&&Un(i,"TYPE","init"),this.da?(Un(i,"$req",e),Un(i,"SID","null"),n.U=!0,gn(n,i,null)):gn(n,i,e),this.v=2}}else 3==this.v&&(t?Lr(this,t):0==this.g.length||ir(this.b)||Lr(this))},rt.Aa=function(){if(this.j=null,qr(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=nn(dt(this.Ta,this),t)}},rt.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,tn(10),Or(this),qr(this))},rt.Sa=function(){null!=this.m&&(this.m=null,Or(this),Vr(this),tn(19))},rt.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),tn(2)):(this.c.info("Failed to ping google.com"),tn(1))},(rt=Wr.prototype).ta=function(){},rt.sa=function(){},rt.ra=function(){},rt.qa=function(){},rt.Ja=function(){},Yr.prototype.a=function(t,e){return new Xr(t,e)},mt(Xr,Ie),Xr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;tn(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Kr(t,null,t.fa),Pr(t)},Xr.prototype.close=function(){Ar(this.a)},Xr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Cr(this.a,e)}else this.l?((e={}).__data__=xe(t),Cr(this.a,e)):Cr(this.a,t)},Xr.prototype.G=function(){this.a.f=null,delete this.f,Ar(this.a),delete this.a,Xr.X.G.call(this)},mt($r,fn),mt(Qr,ln),mt(Zr,Wr),Zr.prototype.ta=function(){Te(this.a,"a")},Zr.prototype.sa=function(t){Te(this.a,new $r(t))},Zr.prototype.ra=function(t){Te(this.a,new Qr(t))},Zr.prototype.qa=function(){Te(this.a,"b")},Yr.prototype.createWebChannel=Yr.prototype.a,Xr.prototype.send=Xr.prototype.h,Xr.prototype.open=Xr.prototype.g,Xr.prototype.close=Xr.prototype.close,rn.NO_ERROR=0,rn.TIMEOUT=8,rn.HTTP_ERROR=6,on.COMPLETE="complete",un.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",Ie.prototype.listen=Ie.prototype.va,vr.prototype.listenOnce=vr.prototype.wa,vr.prototype.getLastError=vr.prototype.Qa,vr.prototype.getLastErrorCode=vr.prototype.ua,vr.prototype.getStatus=vr.prototype.W,vr.prototype.getResponseJson=vr.prototype.Pa,vr.prototype.getResponseText=vr.prototype.$,vr.prototype.send=vr.prototype.ba;var ti=rn,ei=on,ni=We,ri=10,ii=11,oi=un,si=vr,ai=new V("@firebase/firestore");function ui(){return ai.logLevel}function ci(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ai.logLevel<=D.DEBUG){var r=e.map(li);ai.debug.apply(ai,l(["Firestore (8.2.2): "+t],r))}}function hi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ai.logLevel<=D.ERROR){var r=e.map(li);ai.error.apply(ai,l(["Firestore (8.2.2): "+t],r))}}function fi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ai.logLevel<=D.WARN){var r=e.map(li);ai.warn.apply(ai,l(["Firestore (8.2.2): "+t],r))}}function li(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function pi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.2) INTERNAL ASSERTION FAILED: "+t;throw hi(e),new Error(e)}function di(t,e){t||pi()}function vi(t,e){return t}function yi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var mi=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=yi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function gi(t,e){return t<e?-1:t>e?1:0}function bi(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function wi(t){return t+"\0"}var _i=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return gi(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();_i.h=new _i("");var Ei={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ii=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o(e,t),e}(Error),Ti=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(_i.fromBase64String(e))}catch(e){throw new Ii(Ei.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(_i.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),ki=function(t){this._=t};function xi(){if("undefined"==typeof Uint8Array)throw new Ii(Ei.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ni(){if("undefined"==typeof atob)throw new Ii(Ei.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Si=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.fromBase64String=function(t){return Ni(),new e(Ti.fromBase64String(t))},e.fromUint8Array=function(t){return xi(),new e(Ti.fromUint8Array(t))},e.prototype.toBase64=function(){return Ni(),this._.toBase64()},e.prototype.toUint8Array=function(){return xi(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(ki),Ai=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},Oi=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Di=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Di.UNAUTHENTICATED=new Di(null),Di.P=new Di("google-credentials-uid"),Di.g=new Di("first-party-uid");var Ci=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},Pi=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(Di.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),Li=function(){function t(t){var e=this;this.C=null,this.currentUser=Di.UNAUTHENTICATED,this.N=!1,this.O=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.O++,e.currentUser=e.F(),e.N=!0,e.p&&e.p(e.currentUser)},this.O=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.O,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.O!==e?(ci("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(di("string"==typeof n.accessToken),new Ci(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.F=function(){var t=this.auth&&this.auth.getUid();return di(null===t||"string"==typeof t),new Di(t)},t}(),Ri=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=Di.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Mi=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new Ri(this.k,this.M))},t.prototype.S=function(t){t(Di.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),ji=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();ji.U=-1;var Vi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ii(Ei.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ii(Ei.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ii(Ei.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ii(Ei.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?gi(this.nanoseconds,t.nanoseconds):gi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ui=function(){function t(t){this.timestamp=t}return t.j=function(e){return new t(e)},t.min=function(){return new t(new Vi(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),qi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&pi(),void 0===n?n=t.length-e:n>t.length-e&&pi(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return t=void 0===t?1:t,this.Y(this.segments,this.offset+t,this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Fi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.prototype.ot=function(){return this.rt().join("/")},e.prototype.toString=function(){return this.ot()},e.ct=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.at=function(){return new e([])},e}(qi),zi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.Y=function(t,n,r){return new e(t,n,r)},e.ut=function(t){return zi.test(t)},e.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.ut(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.ot()},e.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},e.lt=function(){return new e(["__name__"])},e._t=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ii(Ei.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ii(Ei.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ii(Ei.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.at=function(){return new e([])},e}(qi),Bi=function(){function t(t){this.path=t}return t.ft=function(e){return new t(Fi.ct(e))},t.dt=function(e){return new t(Fi.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Fi.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return Fi.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new Fi(e.slice()))},t}();function Gi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ki(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ji(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Wi=function(){function t(t){this.fields=t,t.sort(Hi.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return bi(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Yi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(t){if(di(!!t),"string"==typeof t){var e=0,n=Yi.exec(t);if(di(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$i(t.seconds),nanos:$i(t.nanos)}}function $i(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Qi(t){return"string"==typeof t?_i.fromBase64String(t):_i.fromUint8Array(t)}function Zi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function to(t){var e=t.mapValue.fields.__previous_value__;return Zi(e)?to(e):e}function eo(t){var e=Xi(t.mapValue.fields.__local_write_time__.timestampValue);return new Vi(e.seconds,e.nanos)}function no(t){return null==t}function ro(t){return 0===t&&1/t==-1/0}function io(t){return"number"==typeof t&&Number.isInteger(t)&&!ro(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zi(t)?4:10:pi()}function so(t,e){var n=oo(t);if(n!==oo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return eo(t).isEqual(eo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Xi(t.timestampValue),r=Xi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Qi(t.bytesValue).isEqual(Qi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return $i(t.geoPointValue.latitude)===$i(e.geoPointValue.latitude)&&$i(t.geoPointValue.longitude)===$i(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return $i(t.integerValue)===$i(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=$i(t.doubleValue),r=$i(e.doubleValue);return n===r?ro(n)===ro(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return bi(t.arrayValue.values||[],e.arrayValue.values||[],so);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Gi(n)!==Gi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!so(n[i],r[i])))return!1;return!0}(t,e);default:return pi()}}function ao(t,e){return void 0!==(t.values||[]).find((function(t){return so(t,e)}))}function uo(t,e){var n=oo(t),r=oo(e);if(n!==r)return gi(n,r);switch(n){case 0:return 0;case 1:return gi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=$i(t.integerValue||t.doubleValue),r=$i(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return co(t.timestampValue,e.timestampValue);case 4:return co(eo(t),eo(e));case 5:return gi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Qi(t),r=Qi(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=gi(n[i],r[i]);if(0!==o)return o}return gi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=gi($i(t.latitude),$i(e.latitude));return 0!==n?n:gi($i(t.longitude),$i(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=uo(n[i],r[i]);if(o)return o}return gi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=gi(r[s],o[s]);if(0!==a)return a;var u=uo(n[r[s]],i[o[s]]);if(0!==u)return u}return gi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw pi()}}function co(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return gi(t,e);var n=Xi(t),r=Xi(e),i=gi(n.seconds,r.seconds);return 0!==i?i:gi(n.nanos,r.nanos)}function ho(t){return fo(t)}function fo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Xi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Qi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Bi.dt(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=fo(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+fo(t.fields[o])}return e+"}"}(t.mapValue):pi();var e,n}function lo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function po(t){return!!t&&"integerValue"in t}function vo(t){return!!t&&"arrayValue"in t}function yo(t){return!!t&&"nullValue"in t}function mo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function go(t){return!!t&&"mapValue"in t}var bo=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!go(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return so(this.proto,t.proto)},t}(),wo=function(){function t(t){void 0===t&&(t=bo.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===oo(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(Hi.at(),this.Rt);return null!=t?new bo(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=go(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function _o(t){var e=[];return Ki(t.fields||{},(function(t,n){var r=new Hi([t]);if(go(n)){var i=_o(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Wi(e)}var Eo=function(t,e){this.key=t,this.version=e},Io=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return o(e,t),e.prototype.field=function(t){return this.Vt.field(t)},e.prototype.data=function(){return this.Vt},e.prototype.vt=function(){return this.Vt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Eo),To=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return o(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Eo),ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Eo),xo=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function No(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new xo(t,e,n,r,i,o,s)}function So(t){var e=vi(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+ho(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),no(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Fo(e.startAt)),e.endAt&&(n+="|ub:",n+=Fo(e.endAt)),e.St=n}return e.St}function Ao(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ho(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!so(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Go(t.startAt,e.startAt)&&Go(t.endAt,e.endAt)}function Oo(t){return Bi.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Do=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return o(e,t),e.create=function(t,n,r){return t.ht()?"in"===n||"not-in"===n?this.Dt(t,n,r):new Co(t,n,r):"array-contains"===n?new Mo(t,r):"in"===n?new jo(t,r):"not-in"===n?new Vo(t,r):"array-contains-any"===n?new Uo(t,r):new e(t,n,r)},e.Dt=function(t,e,n){return"in"===e?new Po(t,n):new Lo(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(uo(e,this.value)):null!==e&&oo(this.value)===oo(e)&&this.Ct(uo(e,this.value))},e.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return pi()}},e.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Co=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Bi.dt(r.referenceValue),i}return o(e,t),e.prototype.matches=function(t){var e=Bi.J(t.key,this.key);return this.Ct(e)},e}(Do),Po=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ro(0,n),r}return o(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Do),Lo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ro(0,n),r}return o(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Do);function Ro(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Bi.dt(t.referenceValue)}))}var Mo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return o(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return vo(e)&&ao(e.arrayValue,this.value)},e}(Do),jo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return o(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ao(this.value.arrayValue,e)},e}(Do),Vo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return o(e,t),e.prototype.matches=function(t){if(ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ao(this.value.arrayValue,e)},e}(Do),Uo=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return o(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!vo(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ao(e.value.arrayValue,t)}))},e}(Do),qo=function(t,e){this.position=t,this.before=e};function Fo(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ho(t)})).join(",")}var zo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ho(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Bo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?Bi.J(Bi.dt(s.referenceValue),n.key):uo(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Go(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!so(t.position[n],e.position[n]))return!1;return!0}var Ko=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ot=null,this.Ft=null,this.startAt,this.endAt};function Jo(t,e,n,r,i,o,s,a){return new Ko(t,e,n,r,i,o,s,a)}function Wo(t){return new Ko(t)}function Yo(t){return!no(t.limit)&&"F"===t.limitType}function Xo(t){return!no(t.limit)&&"L"===t.limitType}function $o(t){return t.Nt.length>0?t.Nt[0].field:null}function Qo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function Zo(t){return null!==t.collectionGroup}function ts(t){var e=vi(t);if(null===e.Ot){e.Ot=[];var n=Qo(e),r=$o(e);if(null!==n&&null===r)n.ht()||e.Ot.push(new zo(n)),e.Ot.push(new zo(Hi.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var a=s[o];e.Ot.push(a),a.field.ht()&&(i=!0)}if(!i){var u=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ot.push(new zo(Hi.lt(),u))}}}return e.Ot}function es(t){var e=vi(t);if(!e.Ft)if("F"===e.limitType)e.Ft=No(e.path,e.collectionGroup,ts(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ts(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new zo(o.field,s))}var a=e.endAt?new qo(e.endAt.position,!e.endAt.before):null,u=e.startAt?new qo(e.startAt.position,!e.startAt.before):null;e.Ft=No(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.Ft}function ns(t,e,n){return new Ko(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rs(t,e){return Ao(es(t),es(e))&&t.limitType===e.limitType}function is(t){return So(es(t))+"|lt:"+t.limitType}function os(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+ho(e.value);var e})).join(", ")+"]"),no(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Fo(t.startAt)),t.endAt&&(e+=", endAt: "+Fo(t.endAt)),"Target("+e+")"}(es(t))+"; limitType="+t.limitType+")"}function ss(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):Bi.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Bo(t.startAt,ts(t),e)||t.endAt&&Bo(t.endAt,ts(t),e))}(t,e)}function as(t){return function(e,n){for(var r=!1,i=0,o=ts(t);i<o.length;i++){var s=o[i],a=us(s,e,n);if(0!==a)return a;r=r||s.field.ht()}return 0}}function us(t,e,n){var r=t.field.ht()?Bi.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?uo(r,i):pi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pi()}}var cs=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ui.min()),void 0===o&&(o=Ui.min()),void 0===s&&(s=_i.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function hs(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ro(e)?"-0":e}}function fs(t){return{integerValue:""+t}}function ls(t,e){return io(e)?fs(e):hs(t,e)}var ps=function(){this.Ut=void 0};function ds(t,e,n){return t instanceof ms?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof gs?bs(t,e):t instanceof ws?_s(t,e):function(t,e){var n=ys(t,e),r=Is(n)+Is(t.Qt);return po(n)&&po(t.Qt)?fs(r):hs(t.Kt,r)}(t,e)}function vs(t,e,n){return t instanceof gs?bs(t,e):t instanceof ws?_s(t,e):n}function ys(t,e){return t instanceof Es?po(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ms=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(ps),gs=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o(e,t),e}(ps);function bs(t,e){for(var n=Ts(e),r=function(t){n.some((function(e){return so(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ws=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o(e,t),e}(ps);function _s(t,e){for(var n=Ts(e),r=function(t){n=n.filter((function(e){return!so(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Es=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return o(e,t),e}(ps);function Is(t){return $i(t.integerValue||t.doubleValue)}function Ts(t){return vo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ks=function(t,e){this.field=t,this.transform=e},xs=function(t,e){this.version=t,this.transformResults=e},Ns=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.jt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ss(t,e){return void 0!==t.updateTime?e instanceof Io&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Io}var As=function(){};function Os(t,e,n){return t instanceof Rs?function(t,e,n){var r=t.value;if(n.transformResults){var i=Vs(t.fieldTransforms,e,n.transformResults);r=qs(t.fieldTransforms,r,i)}return new Io(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ms?function(t,e,n){if(!Ss(t.Gt,e))return new ko(t.key,n.version);var r=js(t,e,n.transformResults?Vs(t.fieldTransforms,e,n.transformResults):[]);return new Io(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new To(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ds(t,e,n,r){return t instanceof Rs?function(t,e,n,r){if(!Ss(t.Gt,e))return e;var i=t.value,o=Us(t.fieldTransforms,n,e);i=qs(t.fieldTransforms,i,o);var s=Ls(e);return new Io(t.key,s,i,{bt:!0})}(t,e,r):t instanceof Ms?function(t,e,n,r){if(!Ss(t.Gt,e))return e;var i=Ls(e),o=js(t,e,Us(t.fieldTransforms,n,e));return new Io(t.key,i,o,{bt:!0})}(t,e,r):function(t,e){return Ss(t.Gt,e)?new To(t.key,Ui.min()):e}(t,e)}function Cs(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Io?e.field(o.field):void 0,a=ys(o.transform,s||null);null!=a&&(n=null==n?(new wo).set(o.field,a):n.set(o.field,a))}return n?n.yt():null}(t.fieldTransforms,e)}function Ps(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&bi(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof gs&&e instanceof gs||t instanceof ws&&e instanceof ws?bi(t.elements,e.elements,so):t instanceof Es&&e instanceof Es?so(t.Qt,e.Qt):t instanceof ms&&e instanceof ms}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function Ls(t){return t instanceof Io?t.version:Ui.min()}var Rs=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return o(e,t),e}(As),Ms=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return o(e,t),e}(As);function js(t,e,n){var r;return r=function(t,e){var n=new wo(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof Io?e.data():bo.empty()),qs(t.fieldTransforms,r,n)}function Vs(t,e,n){var r=[];di(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Io&&(a=e.field(o.field)),r.push(vs(s,a,n[i]))}return r}function Us(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Io&&(c=n.field(a.field)),i.push(ds(u,c,e))}return i}function qs(t,e,n){for(var r=new wo(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.yt()}var Fs,zs,Hs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return o(e,t),e}(As),Bs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return o(e,t),e}(As),Gs=function(t){this.count=t};function Ks(t){switch(t){case Ei.OK:return pi();case Ei.CANCELLED:case Ei.UNKNOWN:case Ei.DEADLINE_EXCEEDED:case Ei.RESOURCE_EXHAUSTED:case Ei.INTERNAL:case Ei.UNAVAILABLE:case Ei.UNAUTHENTICATED:return!1;case Ei.INVALID_ARGUMENT:case Ei.NOT_FOUND:case Ei.ALREADY_EXISTS:case Ei.PERMISSION_DENIED:case Ei.FAILED_PRECONDITION:case Ei.ABORTED:case Ei.OUT_OF_RANGE:case Ei.UNIMPLEMENTED:case Ei.DATA_LOSS:return!0;default:return pi()}}function Js(t){if(void 0===t)return hi("GRPC error has no .code"),Ei.UNKNOWN;switch(t){case Fs.OK:return Ei.OK;case Fs.CANCELLED:return Ei.CANCELLED;case Fs.UNKNOWN:return Ei.UNKNOWN;case Fs.DEADLINE_EXCEEDED:return Ei.DEADLINE_EXCEEDED;case Fs.RESOURCE_EXHAUSTED:return Ei.RESOURCE_EXHAUSTED;case Fs.INTERNAL:return Ei.INTERNAL;case Fs.UNAVAILABLE:return Ei.UNAVAILABLE;case Fs.UNAUTHENTICATED:return Ei.UNAUTHENTICATED;case Fs.INVALID_ARGUMENT:return Ei.INVALID_ARGUMENT;case Fs.NOT_FOUND:return Ei.NOT_FOUND;case Fs.ALREADY_EXISTS:return Ei.ALREADY_EXISTS;case Fs.PERMISSION_DENIED:return Ei.PERMISSION_DENIED;case Fs.FAILED_PRECONDITION:return Ei.FAILED_PRECONDITION;case Fs.ABORTED:return Ei.ABORTED;case Fs.OUT_OF_RANGE:return Ei.OUT_OF_RANGE;case Fs.UNIMPLEMENTED:return Ei.UNIMPLEMENTED;case Fs.DATA_LOSS:return Ei.DATA_LOSS;default:return pi()}}(zs=Fs||(Fs={}))[zs.OK=0]="OK",zs[zs.CANCELLED=1]="CANCELLED",zs[zs.UNKNOWN=2]="UNKNOWN",zs[zs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zs[zs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zs[zs.NOT_FOUND=5]="NOT_FOUND",zs[zs.ALREADY_EXISTS=6]="ALREADY_EXISTS",zs[zs.PERMISSION_DENIED=7]="PERMISSION_DENIED",zs[zs.UNAUTHENTICATED=16]="UNAUTHENTICATED",zs[zs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zs[zs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zs[zs.ABORTED=10]="ABORTED",zs[zs.OUT_OF_RANGE=11]="OUT_OF_RANGE",zs[zs.UNIMPLEMENTED=12]="UNIMPLEMENTED",zs[zs.INTERNAL=13]="INTERNAL",zs[zs.UNAVAILABLE=14]="UNAVAILABLE",zs[zs.DATA_LOSS=15]="DATA_LOSS";var Ws=function(){function t(t,e){this.J=t,this.root=e||Xs.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,Xs.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,Xs.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new Ys(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new Ys(this.root,t,this.J,!1)},t.prototype.se=function(){return new Ys(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new Ys(this.root,t,this.J,!0)},t}(),Ys=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),Xs=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw pi();if(this.right._e())throw pi();var t=this.left.me();if(t!==this.right.me())throw pi();return t+(this._e()?0:1)},t}();Xs.EMPTY=null,Xs.RED=!0,Xs.Jt=!1,Xs.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw pi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new Xs(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var $s=function(){function t(t){this.J=t,this.data=new Ws(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new Qs(this.data.ee())},t.prototype.ne=function(t){return new Qs(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),Qs=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),Zs=new Ws(Bi.J);function ta(){return Zs}function ea(){return ta()}var na=new Ws(Bi.J);function ra(){return na}var ia=new Ws(Bi.J);function oa(){return ia}var sa=new $s(Bi.J);function aa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=sa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ua=new $s(gi);function ca(){return ua}var ha=function(){function t(t){this.J=t?function(e,n){return t(e,n)||Bi.J(e.key,n.key)}:function(t,e){return Bi.J(t.key,e.key)},this.Ve=ra(),this.pe=new Ws(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),fa=function(){function t(){this.ve=new Ws(Bi.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):pi():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),la=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=a}return t.Oe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ha.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&rs(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),pa=function(){function t(t,e,n,r,i){this.Mt=t,this.Fe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,da.Be(e,n)),new t(Ui.min(),r,ca(),ta(),aa())},t}(),da=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(_i.h,n,aa(),aa(),aa())},t}(),va=function(t,e,n,r){this.je=t,this.removedTargetIds=e,this.key=n,this.We=r},ya=function(t,e){this.targetId=t,this.Ge=e},ma=function(t,e,n,r){void 0===n&&(n=_i.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ga=function(){function t(){this.ze=0,this.He=_a(),this.Je=_i.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=aa(),e=aa(),n=aa();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:pi()}})),new da(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=_a()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),ba=function(){function t(t){this.hn=t,this.ln=new Map,this._n=ta(),this.fn=wa(),this.dn=new $s(gi)}return t.prototype.wn=function(t){for(var e=0,n=t.je;e<n.length;e++){var r=n[e];t.We instanceof Io?this.En(r,t.We):t.We instanceof To&&this.Tn(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Tn(r,t.key,t.We)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:pi()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Oo(i))if(0===n){var o=new Bi(i.path);this.Tn(e,o,new To(o,Ui.min()))}else di(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&Oo(o.target)){var s=new Bi(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new To(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=aa();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new pa(t,n,this.dn,this._n,r);return this._n=ta(),this.fn=wa(),this.dn=new $s(gi),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new ga,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new $s(gi),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||ci("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new ga),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function wa(){return new Ws(Bi.J)}function _a(){return new Ws(Bi.J)}var Ea={asc:"ASCENDING",desc:"DESCENDING"},Ia={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ta=function(t,e){this.T=t,this.qt=e};function ka(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function xa(t,e){return t.qt?e.toBase64():e.toUint8Array()}function Na(t,e){return ka(t,e.G())}function Sa(t){return di(!!t),Ui.j(function(t){var e=Xi(t);return new Vi(e.seconds,e.nanos)}(t))}function Aa(t,e){return function(t){return new Fi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function Oa(t){var e=Fi.ct(t);return di(tu(e)),e}function Da(t,e){return Aa(t.T,e.path)}function Ca(t,e){var n=Oa(e);if(n.get(1)!==t.T.projectId)throw new Ii(Ei.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new Ii(Ei.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new Bi(Ma(n))}function Pa(t,e){return Aa(t.T,e)}function La(t){var e=Oa(t);return 4===e.length?Fi.at():Ma(e)}function Ra(t){return new Fi(["projects",t.T.projectId,"databases",t.T.database]).ot()}function Ma(t){return di(t.length>4&&"documents"===t.get(4)),t.X(5)}function ja(t,e,n){return{name:Da(t,e),fields:n.proto.mapValue.fields}}function Va(t,e,n){var r=Ca(t,e.name),i=Sa(e.updateTime),o=new bo({mapValue:{fields:e.fields}});return new Io(r,i,o,{hasCommittedMutations:!!n})}function Ua(t,e){var n;if(e instanceof Rs)n={update:ja(t,e.key,e.value)};else if(e instanceof Hs)n={delete:Da(t,e.key)};else if(e instanceof Ms)n={update:ja(t,e.key,e.data),updateMask:Za(e.zt)};else{if(!(e instanceof Bs))return pi();n={verify:Da(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ms)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof gs)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof ws)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof Es)return{fieldPath:e.field.ot(),increment:n.Qt};throw pi()}(0,t)}))),e.Gt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Na(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:pi()}(t,e.Gt)),n}function qa(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ns.updateTime(Sa(t.updateTime)):void 0!==t.exists?Ns.exists(t.exists):Ns.jt()}(e.currentDocument):Ns.jt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)di("REQUEST_TIME"===e.setToServerValue),n=new ms;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new gs(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ws(i)}else"increment"in e?n=new Es(t,e.increment):pi();var o=Hi._t(e.fieldPath);return new ks(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ca(t,e.update.name),o=new bo({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Wi(e.map((function(t){return Hi._t(t)})))}(e.updateMask);return new Ms(i,o,s,n,r)}return new Rs(i,o,n,r)}if(e.delete){var a=Ca(t,e.delete);return new Hs(a,n)}if(e.verify){var u=Ca(t,e.verify);return new Bs(u,n)}return pi()}function Fa(t,e){return{documents:[Pa(t,e.path)]}}function za(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Pa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pa(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(mo(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NAN"}};if(yo(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(mo(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NOT_NAN"}};if(yo(t.value))return{unaryFilter:{field:Ya(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(t.field),op:Wa(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ya(t.field),direction:Ja(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||no(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ga(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ga(e.endAt)),n}function Ha(t){var e=La(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){di(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ba(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new zo(Xa(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return no(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ka(n.startAt));var h=null;return n.endAt&&(h=Ka(n.endAt)),Jo(e,i,a,s,u,"F",c,h)}function Ba(t){return t?void 0!==t.unaryFilter?[Qa(t)]:void 0!==t.fieldFilter?[$a(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ba(t)})).reduce((function(t,e){return t.concat(e)})):pi():[]}function Ga(t){return{before:t.before,values:t.position}}function Ka(t){var e=!!t.before,n=t.values||[];return new qo(n,e)}function Ja(t){return Ea[t]}function Wa(t){return Ia[t]}function Ya(t){return{fieldPath:t.ot()}}function Xa(t){return Hi._t(t.fieldPath)}function $a(t){return Do.create(Xa(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return pi()}}(t.fieldFilter.op),t.fieldFilter.value)}function Qa(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Xa(t.unaryFilter.field);return Do.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Xa(t.unaryFilter.field);return Do.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xa(t.unaryFilter.field);return Do.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xa(t.unaryFilter.field);return Do.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return pi()}}function Za(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function tu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var eu=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},nu=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.On=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.On&&pi(),this.On=!0,this.Nn?this.error?this.Fn(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.Fn(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.Fn=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),ru=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new eu,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new su(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=fu(e.target.error);n.qn.reject(new su(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new su(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(ci("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new uu(e)},t}(),iu=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(v())&&hi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ci("SimpleDb","Removing database:",t),cu(window.indexedDB.deleteDatabase(t)).Mn()},t.jn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=v(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(ci("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new su(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ii(Ei.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new su(t,n))},i.onupgradeneeded=function(t){ci("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Qn.Yn(e,i.transaction,t.oldVersion,n.version).next((function(){ci("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s,a,c;return u(this,(function(h){switch(h.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,c,h,f;return u(this,(function(u){switch(u.label){case 0:++o,u.label=1;case 1:return u.trys.push([1,4,,5]),[4,a.Jn(t)];case 2:return a.db=u.sent(),e=ru.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),nu.reject(t)})).Mn(),c={},s.catch((function(){})),[4,e.Un];case 3:return[2,(c.value=(u.sent(),s),c)];case 4:return h=u.sent(),f="FirebaseError"!==h.name&&o<3,ci("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),a.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},a=this,h.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ou=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return cu(this.ts.delete())},t}(),su=function(t){function e(e,n){var r=this;return(r=t.call(this,Ei.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return o(e,t),e}(Ii);function au(t){return"IndexedDbTransactionError"===t.name}var uu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ci("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ci("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),cu(n)},t.prototype.add=function(t){return ci("SimpleDb","ADD",this.store.name,t,t),cu(this.store.add(t))},t.prototype.get=function(t){var e=this;return cu(this.store.get(t)).next((function(n){return void 0===n&&(n=null),ci("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return ci("SimpleDb","DELETE",this.store.name,t),cu(this.store.delete(t))},t.prototype.count=function(){return ci("SimpleDb","COUNT",this.store.name),cu(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){ci("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new nu((function(n,r){e.onerror=function(t){var e=fu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new nu((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ou(i),s=e(i.primaryKey,i.value,o);if(s instanceof nu){var a=s.catch((function(t){return o.done(),nu.reject(t)}));n.push(a)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return nu.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function cu(t){return new nu((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=fu(t.target.error);n(e)}}))}var hu=!1;function fu(t){var e=iu.Kn(v());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ii("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hu||(hu=!0,setTimeout((function(){throw r}),0)),r}}return t}var lu=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new eu,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new Ii(Ei.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function pu(t,e){if(hi("AsyncQueue",e+": "+t),au(t))return new Ii(Ei.UNAVAILABLE,e+": "+t);throw t}var du="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vu=function(){function t(){this.gs=[]}return t.prototype.Vs=function(t){this.gs.push(t)},t.prototype.ps=function(){this.gs.forEach((function(t){return t()}))},t}();function yu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=gu(e)),e=mu(t.get(n),e);return gu(e)}function mu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function gu(t){return t+""}function bu(t){var e=t.length;if(di(e>=2),2===e)return di(""===t.charAt(0)&&""===t.charAt(1)),Fi.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&pi(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:pi()}o=s+2}return new Fi(r)}var wu=function(t,e){this.seconds=t,this.nanoseconds=e},_u=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};_u.store="owner",_u.key="owner";var Eu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Eu.store="mutationQueues",Eu.keyPath="userId";var Iu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Iu.store="mutations",Iu.keyPath="batchId",Iu.userMutationsIndex="userMutationsIndex",Iu.userMutationsKeyPath=["userId","batchId"];var Tu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,yu(e)]},t.key=function(t,e,n){return[t,yu(e),n]},t}();Tu.store="documentMutations",Tu.PLACEHOLDER=new Tu;var ku=function(t,e){this.path=t,this.readTime=e},xu=function(t,e){this.path=t,this.version=e},Nu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Nu.store="remoteDocuments",Nu.readTimeIndex="readTimeIndex",Nu.readTimeIndexPath="readTime",Nu.collectionReadTimeIndex="collectionReadTimeIndex",Nu.collectionReadTimeIndexPath=["parentPath","readTime"];var Su=function(t){this.byteSize=t};Su.store="remoteDocumentGlobal",Su.key="remoteDocumentGlobalKey";var Au=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Au.store="targets",Au.keyPath="targetId",Au.queryTargetsIndexName="queryTargetsIndex",Au.queryTargetsKeyPath=["canonicalId","targetId"];var Ou=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ou.store="targetDocuments",Ou.keyPath=["targetId","path"],Ou.documentTargetsIndex="documentTargetsIndex",Ou.documentTargetsKeyPath=["path","targetId"];var Du=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Du.key="targetGlobalKey",Du.store="targetGlobal";var Cu=function(t,e){this.collectionId=t,this.parent=e};Cu.store="collectionParents",Cu.keyPath=["collectionId","parent"];var Pu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Pu.store="clientMetadata",Pu.keyPath="clientId";var Lu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Lu.store="bundles",Lu.keyPath="bundleId";var Ru=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ru.store="namedQueries",Ru.keyPath="name";var Mu=l(l(l(l([Eu.store,Iu.store,Tu.store,Nu.store,Au.store,_u.store,Du.store,Ou.store],[Pu.store]),[Su.store]),[Cu.store]),[Lu.store,Ru.store]),ju=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bs=e,r.vs=n,r}return o(e,t),e}(vu);function Vu(t,e){var n=vi(t);return iu.Hn(n.bs,e)}var Uu=function(){function t(t,e,n,r){this.batchId=t,this.Ss=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ds=function(t,e,n){for(var r=n.Cs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Os(o,e,r[i]))}return e},t.prototype.xs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Ds(s,e,0,this.Ss));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Ds(s,e,0,this.Ss))}return e},t.prototype.Ns=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.xs(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),aa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&bi(this.mutations,t.mutations,(function(t,e){return Ps(t,e)}))&&bi(this.baseMutations,t.baseMutations,(function(t,e){return Ps(t,e)}))},t}(),qu=function(){function t(t,e,n,r){this.batch=t,this.Os=e,this.Cs=n,this.Fs=r}return t.from=function(e,n,r){di(e.mutations.length===r.length);for(var i=oa(),o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Fu=function(t){this.ks=t};function zu(t,e){if(e.document)return Va(t.ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Bi.Tt(e.noDocument.path),r=Ju(e.noDocument.readTime);return new To(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Bi.Tt(e.unknownDocument.path);return r=Ju(e.unknownDocument.version),new ko(i,r)}return pi()}function Hu(t,e,n){var r=Bu(n),i=e.key.path.Z().rt();if(e instanceof Io){var o=function(t,e){return{name:Da(t,e.key),fields:e.vt().mapValue.fields,updateTime:ka(t,e.version.G())}}(t.ks,e),s=e.hasCommittedMutations;return new Nu(null,null,o,s,r,i)}if(e instanceof To){var a=e.key.path.rt(),u=Ku(e.version);return s=e.hasCommittedMutations,new Nu(null,new ku(a,u),null,s,r,i)}if(e instanceof ko){var c=e.key.path.rt(),h=Ku(e.version);return new Nu(new xu(c,h),null,null,!0,r,i)}return pi()}function Bu(t){var e=t.G();return[e.seconds,e.nanoseconds]}function Gu(t){var e=new Vi(t[0],t[1]);return Ui.j(e)}function Ku(t){var e=t.G();return new wu(e.seconds,e.nanoseconds)}function Ju(t){var e=new Vi(t.seconds,t.nanoseconds);return Ui.j(e)}function Wu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return qa(t.ks,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return qa(t.ks,e)})),s=Vi.fromMillis(e.localWriteTimeMs);return new Uu(e.batchId,s,n,o)}function Yu(t){var e,n,r=Ju(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ju(t.lastLimboFreeSnapshotVersion):Ui.min();return void 0!==t.query.documents?(di(1===(n=t.query).documents.length),e=es(Wo(La(n.documents[0])))):e=function(t){return es(Ha(t))}(t.query),new cs(e,t.targetId,0,t.lastListenSequenceNumber,r,i,_i.fromBase64String(t.resumeToken))}function Xu(t,e){var n,r=Ku(e.Mt),i=Ku(e.lastLimboFreeSnapshotVersion);n=Oo(e.target)?Fa(t.ks,e.target):za(t.ks,e.target);var o=e.resumeToken.toBase64();return new Au(e.targetId,So(e.target),r,o,e.sequenceNumber,i,n)}function $u(t){var e=Ha({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ns(e,e.limit,"L"):e}var Qu=function(){function t(){}return t.prototype.Ms=function(t,e){return Zu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ju(e.createTime),version:e.version};var e}))},t.prototype.Ls=function(t,e){return Zu(t).put({bundleId:(n=e).id,createTime:Ku(Sa(n.createTime)),version:n.version});var n},t.prototype.$s=function(t,e){return tc(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:$u(e.bundledQuery),readTime:Ju(e.readTime)};var e}))},t.prototype.Bs=function(t,e){return tc(t).put(function(t){return{name:t.name,readTime:Ku(Sa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Zu(t){return Vu(t,Lu.store)}function tc(t){return Vu(t,Ru.store)}var ec=function(){function t(){this.qs=new nc}return t.prototype.Us=function(t,e){return this.qs.add(e),nu.resolve()},t.prototype.Qs=function(t,e){return nu.resolve(this.qs.getEntries(e))},t}(),nc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new $s(Fi.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new $s(Fi.J)).rt()},t}(),rc=function(){function t(){this.Ks=new nc}return t.prototype.Us=function(t,e){var n=this;if(!this.Ks.has(e)){var r=e.et(),i=e.Z();t.Vs((function(){n.Ks.add(e)}));var o={collectionId:r,parent:yu(i)};return ic(t).put(o)}return nu.resolve()},t.prototype.Qs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[wi(e),""],!1,!0);return ic(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(bu(o.parent))}return n}))},t}();function ic(t){return Vu(t,Cu.store)}var oc={js:!1,Ws:0,Gs:0,zs:0},sc=function(){function t(t,e,n){this.Hs=t,this.Js=e,this.Ys=n}return t.Xs=function(e){return new t(e,t.Zs,t.ti)},t}();function ac(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){if(t.code!==Ei.FAILED_PRECONDITION||t.message!==du)throw t;return ci("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}sc.Zs=10,sc.ti=1e3,sc.ei=new sc(41943040,sc.Zs,sc.ti),sc.ni=new sc(-1,0,0);var uc=function(){function t(t,e){this.si=t,this.ii=e,this.ri={}}return t.prototype.get=function(t){var e=this.si(t),n=this.ri[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.ii(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.si(t),r=this.ri[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ii(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ri[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.si(t),n=this.ri[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ii(n[r][0],t))return 1===n.length?delete this.ri[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ki(this.ri,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.nt=function(){return Ji(this.ri)},t}(),cc=function(){function t(){this.oi=new uc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ci=!1}return t.prototype.ai=function(t){var e=this.oi.get(t);return e?e.readTime:Ui.min()},t.prototype.ui=function(t,e){this.hi(),this.oi.set(t.key,{li:t,readTime:e})},t.prototype._i=function(t,e){void 0===e&&(e=null),this.hi(),this.oi.set(t,{li:null,readTime:e})},t.prototype.fi=function(t,e){this.hi();var n=this.oi.get(e);return void 0!==n?nu.resolve(n.li):this.di(t,e)},t.prototype.getEntries=function(t,e){return this.wi(t,e)},t.prototype.apply=function(t){return this.hi(),this.ci=!0,this.Ei(t)},t.prototype.hi=function(){},t}();function hc(t,e,n){var r=t.store(Iu.store),i=t.store(Tu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ls({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){di(1===a)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Tu.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return nu.$n(o).next((function(){return c}))}function fc(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw pi();e=t.noDocument}return JSON.stringify(e).length}var lc=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ti=n,this.Ii=r,this.mi={}}return t.Ai=function(e,n,r,i){return di(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Ri=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dc(t).ls({index:Iu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Pi=function(t,e,n,r){var i=this,o=vc(t),s=dc(t);return s.add({}).next((function(a){di("number"==typeof a);for(var u=new Uu(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ua(t.ks,e)})),i=n.mutations.map((function(e){return Ua(t.ks,e)}));return new Iu(e,n.batchId,n.Ss.toMillis(),r,i)}(i.Kt,i.userId,u),h=[],f=new $s((function(t,e){return gi(t.ot(),e.ot())})),l=0,p=r;l<p.length;l++){var d=p[l],v=Tu.key(i.userId,d.key.path,a);f=f.add(d.key.path.Z()),h.push(s.put(c)),h.push(o.put(v,Tu.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ti.Us(t,e))})),t.Vs((function(){i.mi[a]=u.keys()})),nu.$n(h).next((function(){return u}))}))},t.prototype.yi=function(t,e){var n=this;return dc(t).get(e).next((function(t){return t?(di(t.userId===n.userId),Wu(n.Kt,t)):null}))},t.prototype.gi=function(t,e){var n=this;return this.mi[e]?nu.resolve(this.mi[e]):this.yi(t,e).next((function(t){if(t){var r=t.keys();return n.mi[e]=r,r}return null}))},t.prototype.Vi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return dc(t).ls({index:Iu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(di(e.batchId>=r),o=Wu(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.pi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return dc(t).ls({index:Iu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.bi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dc(t).os(Iu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Wu(e.Kt,t)}))}))},t.prototype.vi=function(t,e){var n=this,r=Tu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return vc(t).ls({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=bu(u);if(a===n.userId&&e.path.isEqual(h))return dc(t).get(c).next((function(t){if(!t)throw pi();di(t.userId===n.userId),o.push(Wu(n.Kt,t))}));s.done()})).next((function(){return o}))},t.prototype.Si=function(t,e){var n=this,r=new $s(gi),i=[];return e.forEach((function(e){var o=Tu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=vc(t).ls({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=bu(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),nu.$n(i).next((function(){return n.Di(t,r)}))},t.prototype.Ci=function(t,e){var n=this,r=e.path,i=r.length+1,o=Tu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new $s(gi);return vc(t).ls({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=bu(u);s===n.userId&&r.st(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Di(t,a)}))},t.prototype.Di=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(dc(t).get(e).next((function(t){if(null===t)throw pi();di(t.userId===n.userId),r.push(Wu(n.Kt,t))})))})),nu.$n(i).next((function(){return r}))},t.prototype.xi=function(t,e){var n=this;return hc(t.bs,this.userId,e).next((function(r){return t.Vs((function(){n.Ni(e.batchId)})),nu.forEach(r,(function(e){return n.Ii.Oi(t,e)}))}))},t.prototype.Ni=function(t){delete this.mi[t]},t.prototype.Fi=function(t){var e=this;return this.Ri(t).next((function(n){if(!n)return nu.resolve();var r=IDBKeyRange.lowerBound(Tu.prefixForUser(e.userId)),i=[];return vc(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=bu(t[1]);i.push(o)}else r.done()})).next((function(){di(0===i.length)}))}))},t.prototype.ki=function(t,e){return pc(t,this.userId,e)},t.prototype.Mi=function(t){var e=this;return yc(t).get(this.userId).next((function(t){return t||new Eu(e.userId,-1,"")}))},t}();function pc(t,e,n){var r=Tu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return vc(t).ls({range:o,hs:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function dc(t){return Vu(t,Iu.store)}function vc(t){return Vu(t,Tu.store)}function yc(t){return Vu(t,Eu.store)}var mc=function(){function t(t){this.Li=t}return t.prototype.next=function(){return this.Li+=2,this.Li},t.$i=function(){return new t(0)},t.Bi=function(){return new t(-1)},t}(),gc=function(){function t(t,e){this.Ii=t,this.Kt=e}return t.prototype.qi=function(t){var e=this;return this.Ui(t).next((function(n){var r=new mc(n.highestTargetId);return n.highestTargetId=r.next(),e.Qi(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ki=function(t){return this.Ui(t).next((function(t){return Ui.j(new Vi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ji=function(t){return this.Ui(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.Ui(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Qi(t,i)}))},t.prototype.Gi=function(t,e){var n=this;return this.zi(t,e).next((function(){return n.Ui(t).next((function(r){return r.targetCount+=1,n.Hi(e,r),n.Qi(t,r)}))}))},t.prototype.Ji=function(t,e){return this.zi(t,e)},t.prototype.Yi=function(t,e){var n=this;return this.Xi(t,e.targetId).next((function(){return bc(t).delete(e.targetId)})).next((function(){return n.Ui(t)})).next((function(e){return di(e.targetCount>0),e.targetCount-=1,n.Qi(t,e)}))},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return bc(t).ls((function(s,a){var u=Yu(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Yi(t,u)))})).next((function(){return nu.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return bc(t).ls((function(t,n){var r=Yu(n);e(r)}))},t.prototype.Ui=function(t){return wc(t).get(Du.key).next((function(t){return di(null!==t),t}))},t.prototype.Qi=function(t,e){return wc(t).put(Du.key,e)},t.prototype.zi=function(t,e){return bc(t).put(Xu(this.Kt,e))},t.prototype.Hi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tr=function(t){return this.Ui(t).next((function(t){return t.targetCount}))},t.prototype.er=function(t,e){var n=So(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bc(t).ls({range:r,index:Au.queryTargetsIndexName},(function(t,n,r){var o=Yu(n);Ao(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nr=function(t,e,n){var r=this,i=[],o=_c(t);return e.forEach((function(e){var s=yu(e.path);i.push(o.put(new Ou(n,s))),i.push(r.Ii.sr(t,n,e))})),nu.$n(i)},t.prototype.ir=function(t,e,n){var r=this,i=_c(t);return nu.forEach(e,(function(e){var o=yu(e.path);return nu.$n([i.delete([n,o]),r.Ii.rr(t,n,e)])}))},t.prototype.Xi=function(t,e){var n=_c(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.cr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=_c(t),i=aa();return r.ls({range:n,hs:!0},(function(t,e,n){var r=bu(t[1]),o=new Bi(r);i=i.add(o)})).next((function(){return i}))},t.prototype.ki=function(t,e){var n=yu(e.path),r=IDBKeyRange.bound([n],[wi(n)],!1,!0),i=0;return _c(t).ls({index:Ou.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return bc(t).get(e).next((function(t){return t?Yu(t):null}))},t}();function bc(t){return Vu(t,Au.store)}function wc(t){return Vu(t,Du.store)}function _c(t){return Vu(t,Ou.store)}function Ec(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=gi(n,i);return 0===s?gi(r,o):s}var Ic=function(){function t(t){this.ar=t,this.buffer=new $s(Ec),this.ur=0}return t.prototype.hr=function(){return++this.ur},t.prototype.lr=function(t){var e=[t,this.hr()];if(this.buffer.size<this.ar)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ec(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Tc=function(){function t(t,e){this._r=t,this.fs=e,this.dr=!1,this.wr=null}return t.prototype.start=function(t){-1!==this._r.params.Hs&&this.Er(t)},t.prototype.stop=function(){this.wr&&(this.wr.cancel(),this.wr=null)},Object.defineProperty(t.prototype,"Tr",{get:function(){return null!==this.wr},enumerable:!1,configurable:!0}),t.prototype.Er=function(t){var e=this,n=this.dr?3e5:6e4;ci("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.wr=this.fs.Ir("lru_garbage_collection",n,(function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:this.wr=null,this.dr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mr(this._r)];case 2:return n.sent(),[3,7];case 3:return au(e=n.sent())?(ci("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ac(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Er(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),kc=function(){function t(t,e){this.Ar=t,this.params=e}return t.prototype.Rr=function(t,e){return this.Ar.Pr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yr=function(t,e){var n=this;if(0===e)return nu.resolve(ji.U);var r=new Ic(e);return this.Ar.mn(t,(function(t){return r.lr(t.sequenceNumber)})).next((function(){return n.Ar.gr(t,(function(t){return r.lr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Zi=function(t,e,n){return this.Ar.Zi(t,e,n)},t.prototype.Vr=function(t,e){return this.Ar.Vr(t,e)},t.prototype.pr=function(t,e){var n=this;return-1===this.params.Hs?(ci("LruGarbageCollector","Garbage collection skipped; disabled"),nu.resolve(oc)):this.br(t).next((function(r){return r<n.params.Hs?(ci("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Hs),oc):n.vr(t,e)}))},t.prototype.br=function(t){return this.Ar.br(t)},t.prototype.vr=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.Rr(t,this.params.Js).next((function(e){return e>c.params.Ys?(ci("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Ys+" from "+e),r=c.params.Ys):r=e,o=Date.now(),c.yr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Zi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.Vr(t,n)})).next((function(t){return u=Date.now(),ui()<=D.DEBUG&&ci("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),nu.resolve({js:!0,Ws:r,Gs:i,zs:t})}))},t}(),xc=function(){function t(t,e){this.db=t,this._r=function(t,e){return new kc(t,e)}(this,e)}return t.prototype.Pr=function(t){var e=this.Sr(t);return this.db.Dr().tr(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Sr=function(t){var e=0;return this.gr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Dr().mn(t,e)},t.prototype.gr=function(t,e){return this.Cr(t,(function(t,n){return e(n)}))},t.prototype.sr=function(t,e,n){return Nc(t,n)},t.prototype.rr=function(t,e,n){return Nc(t,n)},t.prototype.Zi=function(t,e,n){return this.db.Dr().Zi(t,e,n)},t.prototype.Oi=function(t,e){return Nc(t,e)},t.prototype.Nr=function(t,e){return function(t,e){var n=!1;return yc(t)._s((function(r){return pc(t,r,e).next((function(t){return t&&(n=!0),nu.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Vr=function(t,e){var n=this,r=this.db.Fr().Or(),i=[],o=0;return this.Cr(t,(function(s,a){if(a<=e){var u=n.Nr(t,s).next((function(e){if(!e)return o++,r.fi(t,s).next((function(){return r._i(s),_c(t).delete([0,yu(s.path)])}))}));i.push(u)}})).next((function(){return nu.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.vs);return this.db.Dr().Ji(t,n)},t.prototype.kr=function(t,e){return Nc(t,e)},t.prototype.Cr=function(t,e){var n,r=_c(t),i=ji.U;return r.ls({index:Ou.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==ji.U&&e(new Bi(bu(n)),i),i=a,n=s):i=ji.U})).next((function(){i!==ji.U&&e(new Bi(bu(n)),i)}))},t.prototype.br=function(t){return this.db.Fr().Mr(t)},t}();function Nc(t,e){return _c(t).put(function(t,e){return new Ou(0,yu(t.path),e)}(e,t.vs))}var Sc=function(){function t(t,e){this.Kt=t,this.Ti=e}return t.prototype.ui=function(t,e,n){return Dc(t).put(Cc(e),n)},t.prototype._i=function(t,e){var n=Dc(t),r=Cc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Lr(t,r)}))},t.prototype.fi=function(t,e){var n=this;return Dc(t).get(Cc(e)).next((function(t){return n.$r(t)}))},t.prototype.Br=function(t,e){var n=this;return Dc(t).get(Cc(e)).next((function(t){var e=n.$r(t);return e?{li:e,size:fc(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ea();return this.qr(t,e,(function(t,e){var i=n.$r(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Ur=function(t,e){var n=this,r=ea(),i=new Ws(Bi.J);return this.qr(t,e,(function(t,e){var o=n.$r(e);o?(r=r.Ht(t,o),i=i.Ht(t,fc(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Qr:r,Kr:i}}))},t.prototype.qr=function(t,e,n){if(e.nt())return nu.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return Dc(t).ls({range:r},(function(t,e,r){for(var s=Bi.Tt(t);o&&Bi.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.jr=function(t,e,n){var r=this,i=ra(),o=e.path.length+1,s={};if(n.isEqual(Ui.min())){var a=e.path.rt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.rt(),c=Bu(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Nu.collectionReadTimeIndex}return Dc(t).ls(s,(function(t,n,s){if(t.length===o){var a=zu(r.Kt,n);e.path.st(a.key.path)?a instanceof Io&&ss(e,a)&&(i=i.Ht(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Or=function(t){return new Ac(this,!!t&&t.Wr)},t.prototype.Mr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Oc(t).get(Su.key).next((function(t){return di(!!t),t}))},t.prototype.Lr=function(t,e){return Oc(t).put(Su.key,e)},t.prototype.$r=function(t){if(t){var e=zu(this.Kt,t);return e instanceof To&&e.version.isEqual(Ui.min())?null:e}return null},t}(),Ac=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Gr=e,r.Wr=n,r.zr=new uc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return o(e,t),e.prototype.Ei=function(t){var e=this,n=[],r=0,i=new $s((function(t,e){return gi(t.ot(),e.ot())}));return this.oi.forEach((function(o,s){var a=e.zr.get(o);if(s.li){var u=Hu(e.Gr.Kt,s.li,e.ai(o));i=i.add(o.path.Z());var c=fc(u);r+=c-a,n.push(e.Gr.ui(t,o,u))}else if(r-=a,e.Wr){var h=Hu(e.Gr.Kt,new To(o,Ui.min()),e.ai(o));n.push(e.Gr.ui(t,o,h))}else n.push(e.Gr._i(t,o))})),i.forEach((function(r){n.push(e.Gr.Ti.Us(t,r))})),n.push(this.Gr.updateMetadata(t,r)),nu.$n(n)},e.prototype.di=function(t,e){var n=this;return this.Gr.Br(t,e).next((function(t){return null===t?(n.zr.set(e,0),null):(n.zr.set(e,t.size),t.li)}))},e.prototype.wi=function(t,e){var n=this;return this.Gr.Ur(t,e).next((function(t){var e=t.Qr;return t.Kr.forEach((function(t,e){n.zr.set(t,e)})),e}))},e}(cc);function Oc(t){return Vu(t,Su.store)}function Dc(t){return Vu(t,Nu.store)}function Cc(t){return t.path.rt()}var Pc=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;di(n<r&&n>=0&&r<=11);var o=new ru("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(_u.store)}(t),function(t){t.createObjectStore(Eu.store,{keyPath:Eu.keyPath}),t.createObjectStore(Iu.store,{keyPath:Iu.keyPath,autoIncrement:!0}).createIndex(Iu.userMutationsIndex,Iu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Tu.store)}(t),Lc(t),function(t){t.createObjectStore(Nu.store)}(t));var s=nu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ou.store),t.deleteObjectStore(Au.store),t.deleteObjectStore(Du.store)}(t),Lc(t)),s=s.next((function(){return function(t){var e=t.store(Du.store),n=new Du(0,0,Ui.min().G(),0);return e.put(Du.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Iu.store).os().next((function(n){t.deleteObjectStore(Iu.store),t.createObjectStore(Iu.store,{keyPath:Iu.keyPath,autoIncrement:!0}).createIndex(Iu.userMutationsIndex,Iu.userMutationsKeyPath,{unique:!0});var r=e.store(Iu.store),i=n.map((function(t){return r.put(t)}));return nu.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Pu.store,{keyPath:Pu.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Hr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Su.store)}(t),i.Jr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Yr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Xr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Nu.store);e.createIndex(Nu.readTimeIndex,Nu.readTimeIndexPath,{unique:!1}),e.createIndex(Nu.collectionReadTimeIndex,Nu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Zr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Lu.store,{keyPath:Lu.keyPath})}(t),function(t){t.createObjectStore(Ru.store,{keyPath:Ru.keyPath})}(t)}))),s},t.prototype.Jr=function(t){var e=0;return t.store(Nu.store).ls((function(t,n){e+=fc(n)})).next((function(){var n=new Su(e);return t.store(Su.store).put(Su.key,n)}))},t.prototype.Hr=function(t){var e=this,n=t.store(Eu.store),r=t.store(Iu.store);return n.os().next((function(n){return nu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(Iu.userMutationsIndex,i).next((function(r){return nu.forEach(r,(function(r){di(r.userId===n.userId);var i=Wu(e.Kt,r);return hc(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Yr=function(t){var e=t.store(Ou.store),n=t.store(Nu.store);return t.store(Du.store).get(Du.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new Fi(n),s=function(t){return[0,yu(t)]}(o);r.push(e.get(s).next((function(n){return n?nu.resolve():function(n){return e.put(new Ou(0,yu(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return nu.$n(r)}))}))},t.prototype.Xr=function(t,e){t.createObjectStore(Cu.store,{keyPath:Cu.keyPath});var n=e.store(Cu.store),r=new nc,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:yu(i)})}};return e.store(Nu.store).ls({hs:!0},(function(t,e){var n=new Fi(t);return i(n.Z())})).next((function(){return e.store(Tu.store).ls({hs:!0},(function(t,e){t[0];var n=t[1],r=(t[2],bu(n));return i(r.Z())}))}))},t.prototype.Zr=function(t){var e=this,n=t.store(Au.store);return n.ls((function(t,r){var i=Yu(r),o=Xu(e.Kt,i);return n.put(o)}))},t}();function Lc(t){t.createObjectStore(Ou.store,{keyPath:Ou.keyPath}).createIndex(Ou.documentTargetsIndex,Ou.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Au.store,{keyPath:Au.keyPath}).createIndex(Au.queryTargetsIndexName,Au.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Du.store)}var Rc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Mc=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.eo=o,this.window=s,this.document=a,this.no=c,this.so=h,this.io=null,this.ro=!1,this.isPrimary=!1,this.networkEnabled=!0,this.oo=null,this.inForeground=!1,this.co=null,this.ao=null,this.uo=Number.NEGATIVE_INFINITY,this.ho=function(t){return Promise.resolve()},!t.jn())throw new Ii(Ei.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ii=new xc(this,i),this.lo=n+"main",this.Kt=new Fu(u),this._o=new iu(this.lo,11,new Pc(this.Kt)),this.fo=new gc(this.Ii,this.Kt),this.Ti=new rc,this.wo=function(t,e){return new Sc(t,e)}(this.Kt,this.Ti),this.Eo=new Qu,this.window&&this.window.localStorage?this.To=this.window.localStorage:(this.To=null,!1===h&&hi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Io().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ii(Ei.FAILED_PRECONDITION,Rc);return t.mo(),t.Ao(),t.Ro(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.fo.ji(e)}))})).then((function(e){t.io=new ji(e,t.no)})).then((function(){t.ro=!0})).catch((function(e){return t._o&&t._o.close(),Promise.reject(e)}))},t.prototype.Po=function(t){var e=this;return this.ho=function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){return this.Tr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.yo=function(t){var e=this;this._o.Zn((function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Vo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.eo.ys((function(){return a(e,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.Tr?[4,this.Io()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Io=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Vc(e).put(new Pu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.po(e).next((function(e){e||(t.isPrimary=!1,t.eo.bo((function(){return t.ho(!1)})))}))})).next((function(){return t.vo(e)})).next((function(n){return t.isPrimary&&!n?t.So(e).next((function(){return!1})):!!n&&t.Do(e).next((function(){return!0}))}))})).catch((function(e){if(au(e))return ci("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ci("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.eo.bo((function(){return t.ho(e)})),t.isPrimary=e}))},t.prototype.po=function(t){var e=this;return jc(t).get(_u.key).next((function(t){return nu.resolve(e.Co(t))}))},t.prototype.xo=function(t){return Vc(t).delete(this.clientId)},t.prototype.No=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i=this;return u(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.Oo(this.uo,18e5)?[3,2]:(this.uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Vu(t,Pu.store);return e.os().next((function(t){var n=i.Fo(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return nu.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.To)for(e=0,n=t;e<n.length;e++)r=n[e],this.To.removeItem(this.ko(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ro=function(){var t=this;this.ao=this.eo.Ir("client_metadata_refresh",4e3,(function(){return t.Io().then((function(){return t.No()})).then((function(){return t.Ro()}))}))},t.prototype.Co=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.vo=function(t){var e=this;return this.so?nu.resolve(!0):jc(t).get(_u.key).next((function(n){if(null!==n&&e.Oo(n.leaseTimestampMs,5e3)&&!e.Mo(n.ownerId)){if(e.Co(n)&&e.networkEnabled)return!0;if(!e.Co(n)){if(!n.allowTabSynchronization)throw new Ii(Ei.FAILED_PRECONDITION,Rc);return!1}}return!(!e.networkEnabled||!e.inForeground)||Vc(t).os().next((function(t){return void 0===e.Fo(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&ci("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Lo=function(){return a(this,void 0,void 0,(function(){var t=this;return u(this,(function(e){switch(e.label){case 0:return this.ro=!1,this.$o(),this.ao&&(this.ao.cancel(),this.ao=null),this.Bo(),this.qo(),[4,this._o.runTransaction("shutdown","readwrite",[_u.store,Pu.store],(function(e){var n=new ju(e,ji.U);return t.So(n).next((function(){return t.xo(n)}))}))];case 1:return e.sent(),this._o.close(),this.Uo(),[2]}}))}))},t.prototype.Fo=function(t,e){var n=this;return t.filter((function(t){return n.Oo(t.updateTimeMs,e)&&!n.Mo(t.clientId)}))},t.prototype.Qo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Vc(e).os().next((function(e){return t.Fo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.Ko=function(t){return lc.Ai(t,this.Kt,this.Ti,this.Ii)},t.prototype.Dr=function(){return this.fo},t.prototype.Fr=function(){return this.wo},t.prototype.jo=function(){return this.Ti},t.prototype.Wo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;ci("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this._o.runTransaction(t,o,Mu,(function(o){return i=new ju(o,r.io?r.io.next():ji.U),"readwrite-primary"===e?r.po(i).next((function(t){return!!t||r.vo(i)})).next((function(e){if(!e)throw hi("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.eo.bo((function(){return r.ho(!1)})),new Ii(Ei.FAILED_PRECONDITION,du);return n(i)})).next((function(t){return r.Do(i).next((function(){return t}))})):r.Go(i).next((function(){return n(i)}))})).then((function(t){return i.ps(),t}))},t.prototype.Go=function(t){var e=this;return jc(t).get(_u.key).next((function(t){if(null!==t&&e.Oo(t.leaseTimestampMs,5e3)&&!e.Mo(t.ownerId)&&!e.Co(t)&&!(e.so||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ii(Ei.FAILED_PRECONDITION,Rc)}))},t.prototype.Do=function(t){var e=new _u(this.clientId,this.allowTabSynchronization,Date.now());return jc(t).put(_u.key,e)},t.jn=function(){return iu.jn()},t.prototype.So=function(t){var e=this,n=jc(t);return n.get(_u.key).next((function(t){return e.Co(t)?(ci("IndexedDbPersistence","Releasing primary lease."),n.delete(_u.key)):nu.resolve()}))},t.prototype.Oo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(hi("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.mo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.co=function(){t.eo.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.Io()}))},this.document.addEventListener("visibilitychange",this.co),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Bo=function(){this.co&&(this.document.removeEventListener("visibilitychange",this.co),this.co=null)},t.prototype.Ao=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.oo=function(){e.$o(),e.eo.ys((function(){return e.Lo()}))},this.window.addEventListener("unload",this.oo))},t.prototype.qo=function(){this.oo&&(this.window.removeEventListener("unload",this.oo),this.oo=null)},t.prototype.Mo=function(t){var e;try{var n=null!==(null===(e=this.To)||void 0===e?void 0:e.getItem(this.ko(t)));return ci("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return hi("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.$o=function(){if(this.To)try{this.To.setItem(this.ko(this.clientId),String(Date.now()))}catch(t){hi("Failed to set zombie client id.",t)}},t.prototype.Uo=function(){if(this.To)try{this.To.removeItem(this.ko(this.clientId))}catch(t){}},t.prototype.ko=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function jc(t){return Vu(t,_u.store)}function Vc(t){return Vu(t,Pu.store)}function Uc(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var qc=function(t,e){this.progress=t,this.zo=e},Fc=function(){function t(t,e,n){this.wo=t,this.Ho=e,this.Ti=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.vi(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.wo.fi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].xs(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=ea();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].xs(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.wo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){var i=n.Xo(t,e,r),o=ta();return i.forEach((function(t,e){e||(e=new To(t,Ui.min())),o=o.Ht(t,e)})),o}))},t.prototype.jr=function(t,e,n){return function(t){return Bi.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):Zo(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new Bi(e)).next((function(t){var e=ra();return t instanceof Io&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=ra();return this.Ti.Qs(t,i).next((function(s){return nu.forEach(s,(function(s){var a=function(t,e){return new Ko(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.wo.jr(t,e,n).next((function(n){return r=n,o.Ho.Ci(t,e)})).next((function(e){return i=e,o.ic(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=Ds(u,r.get(c),0,o.Ss);r=h instanceof Io?r.Ht(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){ss(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=aa(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ms&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.wo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Io&&(c=c.Ht(t,e))})),c}))},t}(),zc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=aa(),i=aa(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Hc=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.jr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(Ui.min())?this.hc(t,e):this.uc.Zo(t,r).next((function(o){var s=i.lc(e,o);return(Yo(e)||Xo(e))&&i._c(e.limitType,s,r,n)?i.hc(t,e):(ui()<=D.DEBUG&&ci("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),os(e)),i.uc.jr(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new $s(as(t));return e.forEach((function(e,r){r instanceof Io&&ss(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return ui()<=D.DEBUG&&ci("QueryEngine","Using full collection scan to execute query:",os(e)),this.uc.jr(t,e,Ui.min())},t}(),Bc=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new Ws(gi),this.wc=new uc((function(t){return So(t)}),Ao),this.Ec=Ui.min(),this.Ho=t.Ko(n),this.Tc=t.Fr(),this.fo=t.Dr(),this.Ic=new Fc(this.Tc,this.Ho,this.persistence.jo()),this.Eo=t.Wo(),this.fc.ac(this.Ic)}return t.prototype.mr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.pr(n,e.dc)}))},t}();function Gc(t,e,n,r){return new Bc(t,e,n,r)}function Kc(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o;return u(this,(function(s){switch(s.label){case 0:return n=vi(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.bi(t).next((function(s){return o=s,r=n.persistence.Ko(e),i=new Fc(n.Tc,r,n.persistence.jo()),r.bi(t)})).next((function(e){for(var n=[],r=[],s=aa(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,m=v.mutations;y<m.length;y++){var g=m[y];s=s.add(g.key)}}return i.Zo(t,s).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),o)]}}))}))}function Jc(t,e){var n=vi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Or({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=nu.resolve();return o.forEach((function(t){s=s.next((function(){return r.fi(e,t)})).next((function(e){var o=e,s=n.Fs.get(t);di(null!==s),(!o||o.version.u(s)<0)&&(o=i.Ds(t,o,n))&&r.ui(o,n.Os)}))})),s.next((function(){return t.Ho.xi(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.Fi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function Wc(t){var e=vi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.fo.Ki(t)}))}function Yc(t,e){var n=vi(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Or({Wr:!0});i=n.dc;var s=[];e.Fe.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.fo.ir(t,e.Ke,o).next((function(){return n.fo.nr(t,e.Ue,o)})));var u=e.resumeToken;if(u.o()>0){var c=a.$t(u,r).Lt(t.vs);i=i.Ht(o,c),function(t,e,n){return di(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.W()-t.Mt.W()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(a,c,e)&&s.push(n.fo.Ji(t,c))}}}));var a=ta();if(e.Me.forEach((function(r,i){e.Le.has(r)&&s.push(n.persistence.Ii.kr(t,r))})),s.push(Xc(t,o,e.Me,r,void 0).next((function(t){a=t}))),!r.isEqual(Ui.min())){var u=n.fo.Ki(t).next((function(e){return n.fo.Wi(t,t.vs,r)}));s.push(u)}return nu.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,a)}))})).then((function(t){return n.dc=i,t}))}function Xc(t,e,n,r,i){var o=aa();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ta();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof To&&s.version.isEqual(Ui.min())?(e._i(n,u),o=o.Ht(n,s)):null==a||s.version.u(a.version)>0||0===s.version.u(a.version)&&a.hasPendingWrites?(e.ui(s,u),o=o.Ht(n,s)):ci("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function $c(t,e){var n=vi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.Vi(t,e)}))}function Qc(t,e){var n=vi(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.fo.er(t,e).next((function(i){return i?(r=i,nu.resolve(r)):n.fo.qi(t).next((function(i){return r=new cs(e,i,0,t.vs),n.fo.Gi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function Zc(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s;return u(this,(function(a){switch(a.label){case 0:r=vi(t),i=r.dc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ii.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!au(s=a.sent()))throw s;return ci("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function th(t,e,n){var r=vi(t),i=Ui.min(),o=aa();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=vi(t),i=r.wc.get(n);return void 0!==i?nu.resolve(r.dc.get(i)):r.fo.er(e,n)}(r,t,es(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.fo.cr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.jr(t,e,n?i:Ui.min(),n?o:aa())})).next((function(t){return{documents:t,Pc:o}}))}))}function eh(t,e){var n=vi(t),r=vi(n.fo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function nh(t){var e=vi(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=vi(t),i=ta(),o=Bu(n),s=Dc(e),a=IDBKeyRange.lowerBound(o,!0);return s.ls({index:Nu.readTimeIndex,range:a},(function(t,e){var n=zu(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{zo:i,readTime:Gu(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.zo,r=t.readTime;return e.Ec=r,n}))}function rh(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){return[2,(e=vi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Dc(t),n=Ui.min();return e.ls({index:Nu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Gu(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}function ih(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s,a,c,h,f,l,p,d;return u(this,(function(u){switch(u.label){case 0:for(i=vi(t),o=aa(),s=ta(),a=oa(),c=0,h=n;c<h.length;c++)f=h[c],l=e.yc(f.metadata.name),f.document&&(o=o.add(l)),s=s.Ht(l,e.gc(f)),a=a.Ht(l,e.Vc(f.metadata.readTime));return p=i.Tc.Or({Wr:!0}),[4,Qc(i,function(t){return es(Wo(Fi.ct("__bundle__/docs/"+t)))}(r))];case 1:return d=u.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Xc(t,p,s,Ui.min(),a).next((function(e){return p.apply(t),e})).next((function(e){return i.fo.Xi(t,d.targetId).next((function(){return i.fo.nr(t,o,d.targetId)})).next((function(){return i.Ic.tc(t,e)}))}))}))]}}))}))}function oh(t,e,n){return void 0===n&&(n=aa()),a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:return[4,Qc(t,es($u(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=vi(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Sa(e.readTime);if(r.Mt.u(o)>=0)return i.Eo.Bs(t,e);var s=r.$t(_i.h,o);return i.dc=i.dc.Ht(s.targetId,s),i.fo.Ji(t,s).next((function(){return i.fo.Xi(t,r.targetId)})).next((function(){return i.fo.nr(t,n,r.targetId)})).next((function(){return i.Eo.Bs(t,e)}))}))]}}))}))}var sh=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ms=function(t,e){return nu.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:Sa(n.createTime)}),nu.resolve()},t.prototype.$s=function(t,e){return nu.resolve(this.vc.get(e))},t.prototype.Bs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:$u(t.bundledQuery),readTime:Sa(t.readTime)}}(e)),nu.resolve()},t}(),ah=function(){function t(){this.Sc=new $s(uh.Dc),this.Cc=new $s(uh.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.sr=function(t,e){var n=new uh(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.sr(t,e)}))},t.prototype.rr=function(t,e){this.Oc(new uh(t,e))},t.prototype.Fc=function(t,e){var n=this;t.forEach((function(t){return n.rr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new Bi(new Fi([])),r=new uh(n,t),i=new uh(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Oc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Oc(e)}))},t.prototype.Oc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new Bi(new Fi([])),n=new uh(e,t),r=new uh(e,t+1),i=aa();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.ki=function(t){var e=new uh(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),uh=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return Bi.J(t.key,e.key)||gi(t.$c,e.$c)},t.xc=function(t,e){return gi(t.$c,e.$c)||Bi.J(t.key,e.key)},t}(),ch=function(){function t(t,e){this.Ti=t,this.Ii=e,this.Ho=[],this.Bc=1,this.qc=new $s(uh.Dc)}return t.prototype.Ri=function(t){return nu.resolve(0===this.Ho.length)},t.prototype.Pi=function(t,e,n,r){var i=this.Bc;this.Bc++,this.Ho.length>0&&this.Ho[this.Ho.length-1];var o=new Uu(i,e,n,r);this.Ho.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.qc=this.qc.add(new uh(u.key,i)),this.Ti.Us(t,u.key.path.Z())}return nu.resolve(o)},t.prototype.yi=function(t,e){return nu.resolve(this.Uc(e))},t.prototype.Vi=function(t,e){var n=e+1,r=this.Qc(n),i=r<0?0:r;return nu.resolve(this.Ho.length>i?this.Ho[i]:null)},t.prototype.pi=function(){return nu.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.bi=function(t){return nu.resolve(this.Ho.slice())},t.prototype.vi=function(t,e){var n=this,r=new uh(e,0),i=new uh(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),nu.resolve(o)},t.prototype.Si=function(t,e){var n=this,r=new $s(gi);return e.forEach((function(t){var e=new uh(t,0),i=new uh(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),nu.resolve(this.Kc(r))},t.prototype.Ci=function(t,e){var n=e.path,r=n.length+1,i=n;Bi.Et(i)||(i=i.child(""));var o=new uh(new Bi(i),0),s=new $s(gi);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)}),o),nu.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.xi=function(t,e){var n=this;di(0===this.jc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return nu.forEach(e.mutations,(function(i){var o=new uh(i.key,e.batchId);return r=r.delete(o),n.Ii.Oi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Ni=function(t){},t.prototype.ki=function(t,e){var n=new uh(e,0),r=this.qc.Pe(n);return nu.resolve(e.isEqual(r&&r.key))},t.prototype.Fi=function(t){return this.Ho.length,nu.resolve()},t.prototype.jc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),hh=function(){function t(t,e){this.Ti=t,this.Wc=e,this.docs=new Ws(Bi.J),this.size=0}return t.prototype.ui=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.Ht(r,{li:e,size:s,readTime:n}),this.size+=s-o,this.Ti.Us(t,r.path.Z())},t.prototype._i=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.fi=function(t,e){var n=this.docs.get(e);return nu.resolve(n?n.li:null)},t.prototype.getEntries=function(t,e){var n=this,r=ea();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e.li:null)})),nu.resolve(r)},t.prototype.jr=function(t,e,n){for(var r=ra(),i=new Bi(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),a=s.key,u=s.value,c=u.li,h=u.readTime;if(!e.path.st(a.path))break;h.u(n)<=0||c instanceof Io&&ss(e,c)&&(r=r.Ht(c.key,c))}return nu.resolve(r)},t.prototype.Gc=function(t,e){return nu.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Or=function(t){return new fh(this)},t.prototype.Mr=function(t){return nu.resolve(this.size)},t}(),fh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Gr=e,n}return o(e,t),e.prototype.Ei=function(t){var e=this,n=[];return this.oi.forEach((function(r,i){i&&i.li?n.push(e.Gr.ui(t,i.li,e.ai(r))):e.Gr._i(r)})),nu.$n(n)},e.prototype.di=function(t,e){return this.Gr.fi(t,e)},e.prototype.wi=function(t,e){return this.Gr.getEntries(t,e)},e}(cc),lh=function(){function t(t){this.persistence=t,this.zc=new uc((function(t){return So(t)}),Ao),this.lastRemoteSnapshotVersion=Ui.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new ah,this.targetCount=0,this.Yc=mc.$i()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),nu.resolve()},t.prototype.Ki=function(t){return nu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ji=function(t){return nu.resolve(this.Hc)},t.prototype.qi=function(t){return this.highestTargetId=this.Yc.next(),nu.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),nu.resolve()},t.prototype.zi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new mc(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.Gi=function(t,e){return this.zi(e),this.targetCount+=1,nu.resolve()},t.prototype.Ji=function(t,e){return this.zi(e),nu.resolve()},t.prototype.Yi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,nu.resolve()},t.prototype.Zi=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.zc.delete(s),o.push(r.Xi(t,a.targetId)),i++)})),nu.$n(o).next((function(){return i}))},t.prototype.tr=function(t){return nu.resolve(this.targetCount)},t.prototype.er=function(t,e){var n=this.zc.get(e)||null;return nu.resolve(n)},t.prototype.nr=function(t,e,n){return this.Jc.Nc(e,n),nu.resolve()},t.prototype.ir=function(t,e,n){this.Jc.Fc(e,n);var r=this.persistence.Ii,i=[];return r&&e.forEach((function(e){i.push(r.Oi(t,e))})),nu.$n(i)},t.prototype.Xi=function(t,e){return this.Jc.kc(e),nu.resolve()},t.prototype.cr=function(t,e){var n=this.Jc.Lc(e);return nu.resolve(n)},t.prototype.ki=function(t,e){return nu.resolve(this.Jc.ki(e))},t}(),ph=function(){function t(t,e){var n=this;this.Xc={},this.io=new ji(0),this.ro=!1,this.ro=!0,this.Ii=t(this),this.fo=new lh(this),this.Ti=new ec,this.wo=function(t,e){return new hh(t,(function(t){return n.Ii.Zc(t)}))}(this.Ti),this.Kt=new Fu(e),this.Eo=new sh(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Lo=function(){return this.ro=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),t.prototype.yo=function(){},t.prototype.Vo=function(){},t.prototype.jo=function(){return this.Ti},t.prototype.Ko=function(t){var e=this.Xc[t.R()];return e||(e=new ch(this.Ti,this.Ii),this.Xc[t.R()]=e),e},t.prototype.Dr=function(){return this.fo},t.prototype.Fr=function(){return this.wo},t.prototype.Wo=function(){return this.Eo},t.prototype.runTransaction=function(t,e,n){var r=this;ci("MemoryPersistence","Starting transaction:",t);var i=new dh(this.io.next());return this.Ii.ta(),n(i).next((function(t){return r.Ii.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.ps(),t}))},t.prototype.na=function(t,e){return nu.Bn(Object.values(this.Xc).map((function(n){return function(){return n.ki(t,e)}})))},t}(),dh=function(t){function e(e){var n=this;return(n=t.call(this)||this).vs=e,n}return o(e,t),e}(vu),vh=function(){function t(t){this.persistence=t,this.sa=new ah,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw pi()},enumerable:!1,configurable:!0}),t.prototype.sr=function(t,e,n){return this.sa.sr(n,e),this.oa.delete(n.toString()),nu.resolve()},t.prototype.rr=function(t,e,n){return this.sa.rr(n,e),this.oa.add(n.toString()),nu.resolve()},t.prototype.Oi=function(t,e){return this.oa.add(e.toString()),nu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Dr();return r.cr(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Yi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.Fr().Or();return nu.forEach(this.oa,(function(r){var i=Bi.ft(r);return e.ca(t,i).next((function(t){t||n._i(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.kr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return nu.Bn([function(){return nu.resolve(n.sa.ki(e))},function(){return n.persistence.Dr().ki(t,e)},function(){return n.persistence.na(t,e)}])},t}();function yh(t,e){return"firestore_clients_"+t+"_"+e}function mh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function gh(t,e){return"firestore_targets_"+t+"_"+e}var bh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Ii(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(hi("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),wh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Ii(r.error.code,r.error.message)),i?new t(e,r.state,o):(hi("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),_h=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ca(),s=0;i&&s<r.activeTargetIds.length;++s)i=io(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(hi("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Eh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(hi("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ih=function(){function t(){this.activeTargetIds=ca()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Th=function(){function t(t,e,n,r,i){this.window=t,this.eo=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new Ws(gi),this.Tr=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=yh(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new Ih),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.jn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,c,h,f,l=this;return u(this,(function(u){switch(u.label){case 0:return[4,this.fa.Qo()];case 1:for(t=u.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(yh(this.persistenceKey,r)))&&(o=_h.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(s=this.storage.getItem(this.ga))&&(a=this.ba(s))&&this.va(a),c=0,h=this.Ia;c<h.length;c++)f=h[c],this.Ea(f);return this.Ia=[],this.window.addEventListener("unload",(function(){return l.Lo()})),this.Tr=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Oa=function(t,e,n){this.Na(t,e,n),this.Fa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(gh(this.persistenceKey,t));if(n){var r=wh.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(gh(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Fa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.ja(t)},t.prototype.Wa=function(){this.Ga()},t.prototype.Lo=function(){this.Tr&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Tr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ci("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ci("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ci("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ci("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void hi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.eo.bo((function(){return a(e,void 0,void 0,(function(){var t,e,r,i,o,s;return u(this,(function(a){if(this.Tr){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(o=this.ba(n.newValue)))return[2,this.va(o)]}else if(n.key===this.Aa)(s=function(t){var e=ji.U;if(null!=t)try{var n=JSON.parse(t);di("number"==typeof n),e=n}catch(t){hi("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ji.U&&this.L(s);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new bh(this.currentUser,t,e,n),i=mh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Fa=function(t){var e=mh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ja=function(t){var e={clientId:this._a,onlineState:t};this.storage.setItem(this.ga,JSON.stringify(e))},t.prototype.Ua=function(t,e,n){var r=gh(this.persistenceKey,t),i=new wh(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return _h.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return bh.aa(new Di(i),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return wh.aa(r,e)},t.prototype.ba=function(t){return Eh.aa(t)},t.prototype.Xa=function(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(ci("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fa.iu(s,a).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=ca();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),kh=function(){function t(){this.ru=new Ih,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Oa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new Ih,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.Lo=function(){},t.prototype.q=function(t){},t.prototype.Wa=function(){},t}(),xh=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.Lo=function(){},t}(),Nh=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.Lo=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){ci("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){ci("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.jn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Sh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ah=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),Oh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return o(e,t),e.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var s=new si;s.listenOnce(ei.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case ti.NO_ERROR:var e=s.getResponseJson();ci("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ti.TIMEOUT:ci("Connection",'RPC "'+t+'" timed out'),o(new Ii(Ei.DEADLINE_EXCEEDED,"Request time out"));break;case ti.HTTP_ERROR:var n=s.getStatus();if(ci("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ei).indexOf(e)>=0?e:Ei.UNKNOWN}(r.status);o(new Ii(a,r.message))}else o(new Ii(Ei.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ii(Ei.UNAVAILABLE,"Connection failed."));break;default:pi()}}finally{ci("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.xu=function(t,e){var n,r=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Yr,o=Xe(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())||"object"==typeof navigator&&"ReactNative"===navigator.product||v().indexOf("Electron/")>=0||function(){var t=v();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||v().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");ci("Connection","Creating WebChannel: "+a,s);var u=i.createWebChannel(a,s),c=!1,h=!1,f=new Ah({du:function(t){h?ci("Connection","Not sending because WebChannel is closed:",t):(c||(ci("Connection","Opening WebChannel transport."),u.open(),c=!0),ci("Connection","WebChannel sending:",t),u.send(t))},wu:function(){return u.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(u,oi.EventType.OPEN,(function(){h||ci("Connection","WebChannel transport opened.")})),l(u,oi.EventType.CLOSE,(function(){h||(h=!0,ci("Connection","WebChannel transport closed"),f.Pu())})),l(u,oi.EventType.ERROR,(function(t){h||(h=!0,fi("Connection","WebChannel transport errored:",t),f.Pu(new Ii(Ei.UNAVAILABLE,"The operation could not be completed")))})),l(u,oi.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];di(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){ci("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Fs[t];if(void 0!==e)return Js(e)}(o),a=i.message;void 0===s&&(s=Ei.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,f.Pu(new Ii(s,a)),u.close()}else ci("Connection","WebChannel received:",n),f.yu(n)}})),l(o,ni.STAT_EVENT,(function(t){t.stat===ri?ci("Connection","Detected buffering proxy"):t.stat===ii&&ci("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Ru()}),0),f},e}(function(){function t(t){this.gu=t,this.T=t.T;var e=t.ssl?"https":"http";this.Vu=e+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);ci("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return ci("RestConnection","Received: ",t),t}),(function(e){throw fi("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.2",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){var n=Sh[t];return this.Vu+"/v1/"+e+":"+n},t}());function Dh(){return"undefined"!=typeof window?window:null}function Ch(){return"undefined"!=typeof document?document:null}function Ph(t){return new Ta(t,!0)}var Lh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.eo=t,this.ds=e,this.Nu=n,this.Ou=r,this.Fu=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Fu},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&ci("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.eo.Ir(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Ou,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Fu&&(this.ku=this.Fu)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),Rh=function(){function t(t,e,n,r,i,o){this.eo=t,this.Qu=n,this.Ku=r,this.ju=i,this.listener=o,this.state=0,this.Wu=0,this.Gu=null,this.stream=null,this.zu=new Lh(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.eo.Ir(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.Wu++,3!==t?this.zu.reset():e&&e.code===Ei.RESOURCE_EXHAUSTED?(hi(e.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===Ei.UNAUTHENTICATED&&this.ju.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.Wu),n=this.Wu;this.ju.getToken().then((function(e){t.Wu===n&&t.rh(e)}),(function(n){e((function(){var e=new Ii(Ei.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.Wu);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return a(t,void 0,void 0,(function(){return u(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return ci("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.eo.ys((function(){return e.Wu===t?n():(ci("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Mh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return o(e,t),e.prototype.ah=function(t){return this.Ku.xu("Listen",t)},e.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:pi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(di(void 0===e||"string"==typeof e),_i.fromBase64String(e||"")):(di(void 0===e||e instanceof Uint8Array),_i.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ei.UNKNOWN:Js(t.code);return new Ii(e,t.message||"")}(a);n=new ma(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ca(t,r.document.name),o=Sa(r.document.updateTime);var a=new bo({mapValue:{fields:r.document.fields}}),u=(s=new Io(i,o,a,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new va(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ca(t,r.document),o=r.readTime?Sa(r.readTime):Ui.min(),a=new To(i,o),s=r.removedTargetIds||[],n=new va([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ca(t,r.document),o=r.removedTargetIds||[],n=new va([],o,i,null);else{if(!("filter"in e))return pi();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Gs(r),o=h.targetId,n=new ya(o,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return Ui.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ui.min():e.readTime?Sa(e.readTime):Ui.min()}(t);return this.listener.uh(e,n)},e.prototype.hh=function(t){var e={};e.database=Ra(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Oo(r)?{documents:Fa(t,r)}:{query:za(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=xa(t,e.resumeToken):e.Mt.u(Ui.min())>0&&(n.readTime=ka(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pi()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(this.Kt,t);n&&(e.labels=n),this.eh(e)},e.prototype.lh=function(t){var e={};e.database=Ra(this.Kt),e.removeTarget=t,this.eh(e)},e}(Rh),jh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return o(e,t),Object.defineProperty(e.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.sh=function(){this._h&&this.dh([])},e.prototype.ah=function(t){return this.Ku.xu("Write",t)},e.prototype.onMessage=function(t){if(di(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(di(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Sa(t.updateTime):Sa(e);n.isEqual(Ui.min())&&(n=Sa(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new xs(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Sa(t.commitTime);return this.listener.wh(n,e)}return di(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},e.prototype.Th=function(){var t={};t.database=Ra(this.Kt),this.eh(t)},e.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ua(e.Kt,t)}))};this.eh(n)},e}(Rh),Vh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return o(e,t),e.prototype.mh=function(){if(this.Ih)throw new Ii(Ei.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===Ei.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===Ei.UNAUTHENTICATED&&r.credentials.v(),t}))},e.prototype.terminate=function(){this.Ih=!1},e}((function(){})),Uh=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.Ir("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(hi(e),this.Ph=!1):ci("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),qh=function(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Oh=new Set,this.Fh=[],this.kh=i,this.kh.cu((function(t){n.ys((function(){return a(o,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return Yh(this)?(ci("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return(e=vi(t)).Oh.add(4),[4,zh(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Oh.delete(4),[4,Fh(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new Uh(n,r)};function Fh(t){return a(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:if(!Yh(t))return[3,4];e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function zh(t){return a(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Hh(t,e){var n=vi(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),Wh(n)?Jh(n):ff(n).Ju()&&Gh(n,e))}function Bh(t,e){var n=vi(t),r=ff(n);n.Nh.delete(e),r.Ju()&&Kh(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():Yh(n)&&n.Mh.set("Unknown"))}function Gh(t,e){t.Lh.cn(e.targetId),ff(t).hh(e)}function Kh(t,e){t.Lh.cn(e),ff(t).lh(e)}function Jh(t){t.Lh=new ba({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),ff(t).start(),t.Mh.yh()}function Wh(t){return Yh(t)&&!ff(t).Hu()&&t.Nh.size>0}function Yh(t){return 0===vi(t).Oh.size}function Xh(t){t.Lh=void 0}function $h(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return t.Nh.forEach((function(e,n){Gh(t,e)})),[2]}))}))}function Qh(t,e){return a(this,void 0,void 0,(function(){return u(this,(function(n){return Xh(t),Wh(t)?(t.Mh.ph(e),Jh(t)):t.Mh.set("Unknown"),[2]}))}))}function Zh(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o;return u(this,(function(s){switch(s.label){case 0:if(t.Mh.set("Online"),!(e instanceof ma&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o;return u(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.Nh.has(o)?[4,t.Ch.$h(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.Nh.delete(o),t.Lh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),ci("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,tf(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof va?t.Lh.wn(e):e instanceof ya?t.Lh.yn(e):t.Lh.In(e),n.isEqual(Ui.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Wc(t.Sh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Fe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(_i.h,n.Mt)),Kh(t,e);var r=new cs(n.target,e,1,n.sequenceNumber);Gh(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return ci("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,tf(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function tf(t,e,n){return a(this,void 0,void 0,(function(){var r=this;return u(this,(function(i){switch(i.label){case 0:if(!au(e))throw e;return t.Oh.add(1),[4,zh(t)];case 1:return i.sent(),t.Mh.set("Offline"),n||(n=function(){return Wc(t.Sh)}),t.fs.bo((function(){return a(r,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return ci("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Oh.delete(1),[4,Fh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function ef(t,e){return e().catch((function(n){return tf(t,n,e)}))}function nf(t){return a(this,void 0,void 0,(function(){var e,n,r,i,o;return u(this,(function(s){switch(s.label){case 0:e=vi(t),n=lf(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Yh(t)&&t.xh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,$c(e.Sh,r)];case 3:return null===(i=s.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=lf(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,tf(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return rf(e)&&of(e),[2]}}))}))}function rf(t){return Yh(t)&&!lf(t).Hu()&&t.xh.length>0}function of(t){lf(t).start()}function sf(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return lf(t).Th(),[2]}))}))}function af(t){return a(this,void 0,void 0,(function(){var e,n,r,i;return u(this,(function(o){for(e=lf(t),n=0,r=t.xh;n<r.length;n++)i=r[n],e.dh(i.mutations);return[2]}))}))}function uf(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=qu.from(r,e,n),[4,ef(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,nf(t)];case 2:return o.sent(),[2]}}))}))}function cf(t,e){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return e&&lf(t).fh?[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return Ks(r=e.code)&&r!==Ei.ABORTED?(n=t.xh.shift(),lf(t).Xu(),[4,ef(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,nf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return rf(t)&&of(t),[2]}}))}))}function hf(t,e){return a(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=vi(t),e?(n.Oh.delete(2),[4,Fh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Oh.add(2),[4,zh(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function ff(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=vi(t);return r.mh(),new Mh(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:$h.bind(null,t),Iu:Qh.bind(null,t),uh:Zh.bind(null,t)}),t.Fh.push((function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),Wh(t)?Jh(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),Xh(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function lf(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=vi(t);return r.mh(),new jh(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:sf.bind(null,t),Iu:cf.bind(null,t),Eh:af.bind(null,t),wh:uf.bind(null,t)}),t.Fh.push((function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,nf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(ci("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh}var pf=function(){this.jh=void 0,this.listeners=[]},df=function(){this.queries=new uc((function(t){return is(t)}),rs),this.onlineState="Unknown",this.Wh=new Set};function vf(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c;return u(this,(function(u){switch(u.label){case 0:if(n=vi(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new pf),!i)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),s=o,[4,n.Gh(r)];case 2:return s.jh=u.sent(),[3,4];case 3:return a=u.sent(),c=pu(a,"Initialization of query '"+os(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zh(n.onlineState),o.jh&&e.Hh(o.jh)&&bf(n),[2]}}))}))}function yf(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s;return u(this,(function(a){return n=vi(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function mf(t,e){for(var n=vi(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hh(s)&&(r=!0);u.jh=s}}r&&bf(n)}function gf(t,e,n){var r=vi(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function bf(t){t.Wh.forEach((function(t){t.next()}))}var wf=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new la(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.sl&&n||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){if(t.docChanges.length>0)return!0;var e=this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites;return!(!t.xe&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=la.Oe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),_f=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),Ef=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return Ca(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?Va(this.Kt,t.document,!1):new To(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return Sa(t)},t}();!function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new Ef(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.yc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||aa()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i;return u(this,(function(o){switch(o.label){case 0:return[4,ih(this.Sh,new Ef(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,oh(this.Sh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new qc(Object.assign({},this.progress),t))]}}))}))}}();var If=function(t){this.key=t},Tf=function(t){this.key=t},kf=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=aa(),this.Ce=aa(),this.ll=as(t),this._l=new ha(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new fa,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,a=!1,u=Yo(this.query)&&i.size===this.query.limit?i.last():null,c=Xo(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var h=i.get(t),f=e instanceof Io?e:null;f&&(f=ss(n.query,f)?f:null);var l=!!h&&n.Ce.has(h.key),p=!!f&&(f.bt||n.Ce.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.El(h,f)||(r.track({type:2,doc:f}),d=!0,(u&&n.ll(f,u)>0||c&&n.ll(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Yo(this.query)||Xo(this.query))for(;s.size>this.query.limit;){var h=Yo(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{_l:s,wl:r,_c:a,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ei=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pi()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var s=e?this.Il():[],a=0===this.hl.size&&this.qe?1:0,u=a!==this.ul;return this.ul=a,0!==o.length||u?{snapshot:new la(this.query,t._l,i,o,t.Ce,0===a,u,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ei({_l:this._l,wl:new fa,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=aa(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new Tf(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new If(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=aa();var e=this.dl(t.documents);return this.Ei(e,!0)},t.prototype.Pl=function(){return la.Oe(this.query,this._l,this.Ce,0===this.ul)},t}(),xf=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Nf=function(t){this.key=t,this.yl=!1},Sf=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new uc((function(t){return is(t)}),rs),this.Dl=new Map,this.Cl=[],this.xl=new Ws(Bi.J),this.Nl=new Map,this.Ol=new ah,this.Fl={},this.kl=new Map,this.Ml=mc.Bi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function Af(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a;return u(this,(function(u){switch(u.label){case 0:return n=il(t),(o=n.Sl.get(e))?(r=o.targetId,n.pl.ka(r),i=o.view.Pl(),[3,4]):[3,1];case 1:return[4,Qc(n.Sh,es(e))];case 2:return s=u.sent(),a=n.pl.ka(s.targetId),r=s.targetId,[4,Of(n,e,r,"current"===a)];case 3:i=u.sent(),n.$l&&Hh(n.gl,s),u.label=4;case 4:return[2,i]}}))}))}function Of(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s,c,h,f;return u(this,(function(l){switch(l.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s;return u(this,(function(a){switch(a.label){case 0:return(i=e.view.dl(n))._c?[4,th(t.Sh,e.query,!1).then((function(t){var n=t.documents;return e.view.dl(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.Fe.get(e.targetId),s=e.view.Ei(i,t.$l,o),[2,(Hf(t,e.targetId,s.ml),s.snapshot)]}}))}))}(t,e,n,r)},[4,th(t.Sh,e,!0)];case 1:return i=l.sent(),o=new kf(e,i.Pc),s=o.dl(i.documents),c=da.Be(n,r&&"Offline"!==t.onlineState),h=o.Ei(s,t.$l,c),Hf(t,n,h.ml),f=new xf(e,n,o),[2,(t.Sl.set(e,f),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),h.snapshot)]}}))}))}function Df(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return n=vi(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!rs(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,Zc(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),Bh(n.gl,r.targetId),Ff(n,r.targetId)})).catch(ac)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ff(n,r.targetId),[4,Zc(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Cf(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s;return u(this,(function(a){switch(a.label){case 0:r=ol(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=vi(t),i=Vi.now(),o=e.reduce((function(t,e){return t.add(e.key)}),aa());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=Cs(c,n.get(c.key));null!=h&&s.push(new Ms(c.key,h,_o(h.proto.mapValue),Ns.exists(!0)))}return r.Ho.Pi(t,i,s,e)}))})).then((function(t){var e=t.Ns(n);return{batchId:t.batchId,oi:e}}))}(r.Sh,e)];case 2:return i=a.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Fl[t.currentUser.R()];r||(r=new Ws(gi)),r=r.Ht(e,n),t.Fl[t.currentUser.R()]=r}(r,i.batchId,n),[4,Kf(r,i.oi)];case 3:return a.sent(),[4,nf(r.gl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=pu(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Pf(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:n=vi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Yc(n.Sh,e)];case 2:return r=i.sent(),e.Fe.forEach((function(t,e){var r=n.Nl.get(e);r&&(di(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?di(r.yl):t.Ke.size>0&&(di(r.yl),r.yl=!1))})),[4,Kf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ac(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Lf(t,e,n){var r=vi(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=vi(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&bf(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function Rf(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s,a,c;return u(this,(function(u){switch(u.label){case 0:return(r=vi(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(o=i&&i.key)?(s=(s=new Ws(Bi.J)).Ht(o,new To(o,Ui.min())),a=aa().add(o),c=new pa(Ui.min(),new Map,new $s(gi),s,a),[4,Pf(r,c)]):[3,2];case 1:return u.sent(),r.xl=r.xl.remove(o),r.Nl.delete(e),Gf(r),[3,4];case 2:return[4,Zc(r.Sh,e,!1).then((function(){return Ff(r,e,n)})).catch(ac)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))}function Mf(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:n=vi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Jc(n.Sh,e)];case 2:return i=o.sent(),qf(n,r,null),Uf(n,r),n.pl.Oa(r,"acknowledged"),[4,Kf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ac(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function jf(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:r=vi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=vi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.yi(t,e).next((function(e){return di(null!==e),r=e.keys(),n.Ho.xi(t,e)})).next((function(){return n.Ho.Fi(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),qf(r,e,n),Uf(r,e),r.pl.Oa(e,"rejected",n),[4,Kf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ac(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Vf(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s;return u(this,(function(a){switch(a.label){case 0:Yh((n=vi(t)).gl)||ci("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=vi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.pi(t)}))}(n.Sh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return o=a.sent(),s=pu(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Uf(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function qf(t,e,n){var r=vi(t),i=r.Fl[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fl[r.currentUser.R()]=i}}function Ff(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Ol.kc(e).forEach((function(e){t.Ol.ki(e)||zf(t,e)}))}function zf(t,e){var n=t.xl.get(e);null!==n&&(Bh(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),Gf(t))}function Hf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof If?(t.Ol.sr(o.key,e),Bf(t,o)):o instanceof Tf?(ci("SyncEngine","Document no longer in limbo: "+o.key),t.Ol.rr(o.key,e),t.Ol.ki(o.key)||zf(t,o.key)):pi()}}function Bf(t,e){var n=e.key;t.xl.get(n)||(ci("SyncEngine","New document in limbo: "+n),t.Cl.push(n),Gf(t))}function Gf(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new Nf(e)),t.xl=t.xl.Ht(e,n),Hh(t.gl,new cs(es(Wo(e.path)),n,2,ji.U))}}function Kf(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s;return u(this,(function(c){switch(c.label){case 0:return r=vi(t),i=[],o=[],s=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,a){s.push(r.Bl(a,e,n).then((function(t){if(t){r.$l&&r.pl.qa(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=zc.cc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return c.sent(),r.vl.uh(i),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,h,f;return u(this,(function(u){switch(u.label){case 0:n=vi(t),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return nu.forEach(e,(function(e){return nu.forEach(e.rc,(function(r){return n.persistence.Ii.sr(t,e.targetId,r)})).next((function(){return nu.forEach(e.oc,(function(r){return n.persistence.Ii.rr(t,e.targetId,r)}))}))}))}))];case 2:return u.sent(),[3,4];case 3:if(!au(r=u.sent()))throw r;return ci("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(c=n.dc.get(a),h=c.Mt,f=c.Bt(h),n.dc=n.dc.Ht(a,f));return[2]}}))}))}(r.Sh,o)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function Jf(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return(n=vi(t)).currentUser.isEqual(e)?[3,3]:(ci("SyncEngine","User change. New user:",e.R()),[4,Kc(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new Ii(Ei.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,Kf(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Wf(t,e){var n=vi(t),r=n.Nl.get(e);if(r&&r.yl)return aa().add(r.key);var i=aa(),o=n.Dl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Sl.get(u);i=i.ye(c.view.fl)}return i}function Yf(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return[4,th((n=vi(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&Hf(n,e.targetId,i.ml),i)]}}))}))}function Xf(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){return[2,nh((e=vi(t)).Sh).then((function(t){return Kf(e,t)}))]}))}))}function $f(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o;return u(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=vi(t),r=vi(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.gi(t,e).next((function(e){return e?n.Ic.Zo(t,e):nu.resolve(null)}))}))}((i=vi(t)).Sh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,nf(i.gl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(qf(i,e,r||null),Uf(i,e),function(t,e){vi(vi(t).Ho).Ni(e)}(i.Sh,e)):pi(),s.label=4;case 4:return[4,Kf(i,o)];case 5:return s.sent(),[3,7];case 6:ci("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Qf(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,h;return u(this,(function(u){switch(u.label){case 0:return il(n=vi(t)),ol(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,Zf(n,r.rt())]);case 1:return i=u.sent(),n.Ll=!0,[4,hf(n.gl,!0)];case 2:for(u.sent(),o=0,s=i;o<s.length;o++)a=s[o],Hh(n.gl,a);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(c=[],h=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?c.push(e):h=h.then((function(){return Ff(n,e),Zc(n.Sh,e,!0)})),Bh(n.gl,e)})),[4,h]);case 4:return u.sent(),[4,Zf(n,c)];case 5:return u.sent(),function(t){var e=vi(t);e.Nl.forEach((function(t,n){Bh(e.gl,n)})),e.Ol.Mc(),e.Nl=new Map,e.xl=new Ws(Bi.J)}(n),n.Ll=!1,[4,hf(n.gl,!1)];case 6:u.sent(),u.label=7;case 7:return[2]}}))}))}function Zf(t,e,n){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,h,f,l,p,d,v,y;return u(this,(function(u){switch(u.label){case 0:n=vi(t),r=[],i=[],o=0,s=e,u.label=1;case 1:return o<s.length?(a=s[o],c=void 0,(h=n.Dl.get(a))&&0!==h.length?[4,Qc(n.Sh,es(h[0]))]:[3,7]):[3,13];case 2:c=u.sent(),f=0,l=h,u.label=3;case 3:return f<l.length?(p=l[f],d=n.Sl.get(p),[4,Yf(n,d)]):[3,6];case 4:(v=u.sent()).snapshot&&i.push(v.snapshot),u.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,eh(n.Sh,a)];case 8:return y=u.sent(),[4,Qc(n.Sh,y)];case 9:return c=u.sent(),[4,Of(n,tl(y),a,!1)];case 10:u.sent(),u.label=11;case 11:r.push(c),u.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function tl(t){return Jo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function el(t){var e=vi(t);return vi(vi(e.Sh).persistence).Qo()}function nl(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s;return u(this,(function(a){switch(a.label){case 0:return(i=vi(t)).Ll?(ci("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,nh(i.Sh)];case 3:return o=a.sent(),s=pa.$e(e,"current"===n),[4,Kf(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Zc(i.Sh,e,!0)];case 6:return a.sent(),Ff(i,e,r),[3,8];case 7:pi(),a.label=8;case 8:return[2]}}))}))}function rl(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s,a,c,h,f,l,p;return u(this,(function(d){switch(d.label){case 0:if(!(r=il(t)).Ll)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(s=o[i],r.Dl.has(s)?(ci("SyncEngine","Adding an already active target "+s),[3,5]):[4,eh(r.Sh,s)]):[3,6];case 2:return a=d.sent(),[4,Qc(r.Sh,a)];case 3:return c=d.sent(),[4,Of(r,tl(a),c.targetId,!1)];case 4:d.sent(),Hh(r.gl,c),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return u(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,Zc(r.Sh,t,!1).then((function(){Bh(r.gl,t),Ff(r,t)})).catch(ac)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,l=n,d.label=7;case 7:return f<l.length?(p=l[f],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function il(t){var e=vi(t);return e.gl.Ch.Bh=Pf.bind(null,e),e.gl.Ch.Sn=Wf.bind(null,e),e.gl.Ch.$h=Rf.bind(null,e),e.vl.uh=mf.bind(null,e.Vl),e.vl.ql=gf.bind(null,e.Vl),e}function ol(t){var e=vi(t);return e.gl.Ch.qh=Mf.bind(null,e),e.gl.Ch.Uh=jf.bind(null,e),e}var sl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.Kt=Ph(t.gu.T),this.pl=this.Wl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Gc(this.persistence,new Hc,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new ph(vh.ra,this.Kt)},t.prototype.Wl=function(t){return new kh},t.prototype.terminate=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.Lo()];case 1:return t.sent(),[4,this.persistence.Lo()];case 2:return t.sent(),[2]}}))}))},t}(),al=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return o(e,t),e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,rh(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,ol(this.Xl.fa)];case 4:return n.sent(),[4,nf(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return Gc(this.persistence,new Hc,t.Yl,this.Kt)},e.prototype.Hl=function(t){var e=this.persistence.Ii._r;return new Tc(e,t.fs)},e.prototype.Gl=function(t){var e=Uc(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?sc.Xs(this.cacheSizeBytes):sc.ei;return new Mc(this.synchronizeTabs,e,t.clientId,n,t.fs,Dh(),Ch(),this.Kt,this.pl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new kh},e}(sl),ul=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return o(e,t),e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){var n,r=this;return u(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.fa,this.pl instanceof Th?(this.pl.fa={nu:$f.bind(null,n),su:nl.bind(null,n),iu:rl.bind(null,n),Qo:el.bind(null,n),eu:Xf.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Po((function(t){return a(r,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,Qf(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Tr?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=Dh();if(!Th.jn(e))throw new Ii(Ei.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Uc(t.gu.T,t.gu.persistenceKey);return new Th(e,t.fs,n,t.clientId,t.Yl)},e}(al),cl=function(){function t(){}return t.prototype.initialize=function(t,e){return a(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return Lf(n.fa,t,1)},this.gl.Ch.s_=Jf.bind(null,this.fa),[4,hf(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new df},t.prototype.Zl=function(t){var e,n=Ph(t.gu.T),r=(e=t.gu,new Oh(e));return function(t,e,n){return new Vh(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return Lf(s.fa,t,0)},o=Nh.jn()?new Nh:new xh,new qh(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Sf(t,e,n,r,i,o);return s&&(a.Ll=!0),a}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=vi(t),ci("RemoteStore","RemoteStore shutting down."),e.Oh.add(5),[4,zh(e)];case 1:return n.sent(),e.kh.Lo(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}(),hl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),fl=(function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new eu,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then((function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Kl=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}}))}))},t.prototype.a_=function(){return a(this,void 0,void 0,(function(){var t,e,n,r;return u(this,(function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new _f(JSON.parse(r),t.length+n)]}}))}))},t.prototype.__=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.u_=function(){return a(this,void 0,void 0,(function(){var t,e;return u(this,(function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.l_=function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return a(this,void 0,void 0,(function(){var t,e;return u(this,(function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new Hi(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}()),ll=function(t){this._methodName=t};function pl(t,e,n){if(!n)throw new Ii(Ei.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function dl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function vl(t,e,n,r){if(!0===e&&!0===r)throw new Ii(Ei.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function yl(t){if(!Bi.Et(t))throw new Ii(Ei.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function ml(t){if(Bi.Et(t))throw new Ii(Ei.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function gl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":pi()}function bl(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ii(Ei.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=gl(t);throw new Ii(Ei.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function wl(t,e){if(e<=0)throw new Ii(Ei.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var _l=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ii(Ei.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ii(Ei.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,vl("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),El=new Map,Il=function(){function t(t,e){this.w_="(lite)",this.E_=new _l({}),this.T_=!1,t instanceof Oi?(this.I_=t,this.m_=new Pi):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ii(Ei.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oi(t.options.projectId)}(t),this.m_=new Li(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Ii(Ei.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Ii(Ei.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new _l(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Pi;switch(t.type){case"gapi":var e=t.client;return di(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Mi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Ii(Ei.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return(t=El.get(this))&&(ci("ComponentProvider","Removing Datastore"),El.delete(this),t.terminate()),Promise.resolve();var t},t}(),Tl=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xl(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),kl=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),xl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Wo(r))||this).firestore=e,i.D_=r,i.type="collection",i}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new Tl(this.firestore,null,new Bi(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(kl);function Nl(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof ki&&(t=t._),pl("collection","path",e),t instanceof Il)return ml(n=Fi.ct.apply(Fi,l([e],r))),new xl(t,null,n);if(!(t instanceof Tl||t instanceof xl))throw new Ii(Ei.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ml(n=Fi.ct.apply(Fi,l([t.path],r)).child(Fi.ct(e))),new xl(t.firestore,null,n)}function Sl(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof ki&&(t=t._),1===arguments.length&&(e=mi.t()),pl("doc","path",e),t instanceof Il)return yl(n=Fi.ct.apply(Fi,l([e],r))),new Tl(t,null,new Bi(n));if(!(t instanceof Tl||t instanceof xl))throw new Ii(Ei.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return yl(n=t.D_.child(Fi.ct.apply(Fi,l([e],r)))),new Tl(t.firestore,t instanceof xl?t.v_:null,new Bi(n))}function Al(t,e){return t instanceof ki&&(t=t._),e instanceof ki&&(e=e._),(t instanceof Tl||t instanceof xl)&&(e instanceof Tl||e instanceof xl)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Ol(t,e){return t instanceof ki&&(t=t._),e instanceof ki&&(e=e._),t instanceof kl&&e instanceof kl&&t.firestore===e.firestore&&rs(t.C_,e.C_)&&t.v_===e.v_}var Dl=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ii(Ei.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ii(Ei.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return gi(this.x_,t.x_)||gi(this.N_,t.N_)},t}(),Cl=/^__.*__$/,Pl=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.O_=function(t,e){return null!==this.zt?new Ms(t,this.data,this.zt,e,this.fieldTransforms):new Rs(t,this.data,e,this.fieldTransforms)},t}(),Ll=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.O_=function(t,e){return new Ms(t,this.data,this.zt,e,this.fieldTransforms)},t}();function Rl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pi()}}var Ml=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.F_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.F_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return np(t,this.settings.methodName,this.settings.j_||!1,this.path,this.settings.W_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.F_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Rl(this.k_)&&Cl.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),jl=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||Ph(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Ml({k_:t,methodName:e,W_:n,path:Hi.at(),B_:!1,j_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function Vl(t){var e=t.p_(),n=Ph(t.I_);return new jl(t.I_,!!e.ignoreUndefinedProperties,n)}function Ul(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Ql("Data must be an object, but it was:",s,r);var a,u,c=Xl(r,s);if(o.merge)a=new Wi(s.zt),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=Zl(e,l[f],n);if(!s.contains(p))throw new Ii(Ei.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");rp(h,p)||h.push(p)}a=new Wi(h),u=s.fieldTransforms.filter((function(t){return a.It(t.field)}))}else a=null,u=s.fieldTransforms;return new Pl(new bo(c),a,u)}var ql=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ll);function Fl(t,e,n){return new Ml({k_:3,W_:e.settings.W_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var zl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.z_=function(t){return new ks(t.path,new ms)},e.prototype.isEqual=function(t){return t instanceof e},e}(ll),Hl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return o(e,t),e.prototype.z_=function(t){var e=Fl(this,t,!0),n=this.H_.map((function(t){return Yl(t,e)})),r=new gs(n);return new ks(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ll),Bl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return o(e,t),e.prototype.z_=function(t){var e=Fl(this,t,!0),n=this.H_.map((function(t){return Yl(t,e)})),r=new ws(n);return new ks(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ll),Gl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return o(e,t),e.prototype.z_=function(t){var e=new Es(t.Kt,ls(t.Kt,this.J_));return new ks(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ll);function Kl(t,e,n,r){var i=t.G_(1,e,n);Ql("Data must be an object, but it was:",i,r);var o=[],s=new wo;Ki(r,(function(t,r){var a=ep(e,t,n);r instanceof ki&&(r=r._);var u=i.U_(a);if(r instanceof ql)o.push(a);else{var c=Yl(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Wi(o);return new Ll(s.yt(),a,i.fieldTransforms)}function Jl(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Zl(e,r,n)],u=[i];if(o.length%2!=0)throw new Ii(Ei.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Zl(e,o[c])),u.push(o[c+1]);for(var h=[],f=new wo,l=a.length-1;l>=0;--l)if(!rp(h,a[l])){var p=a[l],d=u[l];d instanceof ki&&(d=d._);var v=s.U_(p);if(d instanceof ql)h.push(p);else{var y=Yl(d,v);null!=y&&(h.push(p),f.set(p,y))}}var m=new Wi(h);return new Ll(f.yt(),m,s.fieldTransforms)}function Wl(t,e,n,r){return void 0===r&&(r=!1),Yl(n,t.G_(r?4:3,e))}function Yl(t,e){if(t instanceof ki&&(t=t._),$l(t))return Ql("Unsupported field value:",e,t),Xl(t,e);if(t instanceof ll)return function(t,e){if(!Rl(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Yl(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof ki&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ls(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Vi.fromDate(t);return{timestampValue:ka(e.Kt,n)}}if(t instanceof Vi)return n=new Vi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ka(e.Kt,n)};if(t instanceof Dl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ti)return{bytesValue:xa(e.Kt,t.l)};if(t instanceof Tl){n=e.T;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Aa(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+gl(t))}(t,e)}function Xl(t,e){var n={};return Ji(t)?e.path&&e.path.length>0&&e.zt.push(e.path):Ki(t,(function(t,r){var i=Yl(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function $l(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Vi||t instanceof Dl||t instanceof Ti||t instanceof Tl||t instanceof ll)}function Ql(t,e,n){if(!$l(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=gl(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function Zl(t,e,n){if(e instanceof ki&&(e=e._),e instanceof fl)return e.d_;if("string"==typeof e)return ep(t,e);throw np("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var tp=new RegExp("[~\\*/\\[\\]]");function ep(t,e,n){if(e.search(tp)>=0)throw np("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(fl.bind.apply(fl,l([void 0],e.split("."))))).d_}catch(r){throw np("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function np(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ii(Ei.INVALID_ARGUMENT,(a+=". ")+t+u)}function rp(t,e){return t.some((function(t){return t.isEqual(e)}))}var ip=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Ii(Ei.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a;return u(this,(function(u){switch(u.label){case 0:return n=vi(t),r=Ra(n.Kt)+"/documents",i={documents:e.map((function(t){return Da(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){di(!!e.found),e.found.name,e.found.updateTime;var n=Ca(t,e.found.name),r=Sa(e.found.updateTime),i=new bo({mapValue:{fields:e.found.fields}});return new Io(n,r,i,{})}(t,e):"missing"in e?function(t,e){di(!!e.missing),di(!!e.readTime);var n=Ca(t,e.missing),r=Sa(e.readTime);return new To(n,r)}(t,e):pi()}(n.Kt,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());di(!!e),a.push(e)})),a)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof To||t instanceof Io?n.sf(t):pi()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.O_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.O_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Hs(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return a(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Bi.ft(n);e.mutations.push(new Bs(r,e.Gt(r)))})),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return n=vi(t),r=Ra(n.Kt)+"/documents",i={writes:e.map((function(t){return Ua(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Io)e=t.version;else{if(!(t instanceof To))throw pi();e=Ui.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ii(Ei.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Ns.updateTime(e):Ns.jt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Ui.min()))throw new Ii(Ei.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ns.updateTime(e)}return Ns.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),op=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new Lh(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return a(t,void 0,void 0,(function(){var t,e,n=this;return u(this,(function(r){return t=new ip(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!no(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ks(e)}return!1},t}(),sp=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=Di.UNAUTHENTICATED,this.clientId=mi.t(),this._f=function(){},this.N=new eu,this.credentials.S((function(t){ci("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new Ii(Ei.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new eu;return this.fs.Tf((function(){return a(t,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=pu(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function ap(t,e){return a(this,void 0,void 0,(function(){var n,r,i=this;return u(this,(function(o){switch(o.label){case 0:return t.fs.Af(),ci("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.bo((function(){return a(i,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,Kc(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.yo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function up(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return t.fs.Af(),[4,cp(t)];case 1:return n=i.sent(),ci("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.fs.bo((function(){return function(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return(n=vi(t)).fs.Af(),ci("RemoteStore","RemoteStore received new credentials"),r=Yh(n),n.Oh.add(3),[4,zh(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Oh.delete(3),[4,Fh(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function cp(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(ci("FirestoreClient","Using default OfflineComponentProvider"),[4,ap(t,new sl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function hp(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(ci("FirestoreClient","Using default OnlineComponentProvider"),[4,up(t,new cl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function fp(t){return cp(t).then((function(t){return t.persistence}))}function lp(t){return cp(t).then((function(t){return t.Sh}))}function pp(t){return hp(t).then((function(t){return t.gl}))}function dp(t){return hp(t).then((function(t){return t.fa}))}function vp(t){return a(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,hp(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=Af.bind(null,e.fa),n.Jh=Df.bind(null,e.fa),n)]}}))}))}function yp(t,e,n){var r=this;void 0===n&&(n={});var i=new eu;return t.fs.ys((function(){return a(r,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new hl({next:function(o){e.ys((function(){return yf(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ii(Ei.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ii(Ei.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new wf(Wo(n.path),o,{includeMetadataChanges:!0,sl:!0});return vf(t,s)},[4,vp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}function mp(t,e,n){var r=this;void 0===n&&(n={});var i=new eu;return t.fs.ys((function(){return a(r,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new hl({next:function(n){e.ys((function(){return yf(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Ii(Ei.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new wf(n,o,{includeMetadataChanges:!0,sl:!0});return vf(t,s)},[4,vp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.fs,e,n,i])]}}))}))})),i.promise}var gp=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new Lh(this,"async_queue_retry"),this.vf=function(){var e=Ch();e&&ci("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=Ch();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Ch();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.bo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return a(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!au(t=n.sent()))throw t;return ci("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,hi("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Ir=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=lu.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&pi()},t.prototype.Af=function(){},t.prototype.Nf=function(){return a(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Of=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),bp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new gp,r.w_="name"in e?e.name:"[DEFAULT]",r}return o(e,t),e.prototype.b_=function(){return this.Lf||_p(this),this.Lf.terminate()},e}(Il);function wp(t){return t.Lf||_p(t),t.Lf.df(),t.Lf}function _p(t){var e=t.p_(),n=function(t,e,n){return new Ai(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new sp(t.m_,t.Mf,n)}function Ep(t,e,n){var r=this,i=new eu;return t.fs.enqueue((function(){return a(r,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ap(t,n)];case 1:return o.sent(),[4,up(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ei.FAILED_PRECONDITION||t.code===Ei.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Ip(t){if(t.R_||t.P_)throw new Ii(Ei.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Tp=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),oo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $i(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(Qi(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.jf(t.arrayValue,e);case 10:return this.Wf(t.mapValue,e);default:throw pi()}},t.prototype.Wf=function(t,e){var n=this,r={};return Ki(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new Dl($i(t.latitude),$i(t.longitude))},t.prototype.jf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=to(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(eo(t));default:return null}},t.prototype.Bf=function(t){var e=Xi(t);return new Vi(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=Fi.ct(t);di(tu(n));var r=new Oi(n.get(1),n.get(3)),i=new Bi(n.X(5));return r.isEqual(e)||hi("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),kp=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Tl(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new xp(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Np("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),xp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(kp);function Np(t,e){return"string"==typeof e?ep(t,e):e instanceof ki?e._.d_:e.d_}function Sp(t){if(Xo(t)&&0===t.Nt.length)throw new Ii(Ei.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ap=function(){};function Op(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Dp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return o(e,t),e.prototype.Yf=function(t){var e=Vl(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Vp(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var f=h[c];u.push(jp(r,t,f))}a={arrayValue:{values:u}}}else a=jp(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Vp(s,o),a=Wl(n,"where",s,"in"===o||"not-in"===o);var l=Do.create(i,o,a);return function(t,e){if(e.xt()){var n=Qo(t);if(null!==n&&!n.isEqual(e.field))throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=$o(t);null!==r&&Up(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Ii(Ei.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ii(Ei.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new kl(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Ap),Cp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return o(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new zo(e,n);return function(t,e){if(null===$o(t)){var n=Qo(t);null!==n&&Up(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new kl(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new Ko(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Ap),Pp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return o(e,t),e.prototype.Yf=function(t){return new kl(t.firestore,t.v_,ns(t.C_,this.nd,this.sd))},e}(Ap),Lp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return o(e,t),e.prototype.Yf=function(t){var e=Mp(t,this.type,this.rd,this.od);return new kl(t.firestore,t.v_,function(t,e){return new Ko(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Ap),Rp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return o(e,t),e.prototype.Yf=function(t){var e=Mp(t,this.type,this.rd,this.od);return new kl(t.firestore,t.v_,function(t,e){return new Ko(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Ap);function Mp(t,e,n,r){if(n[0]instanceof ki&&(n[0]=n[0]._),n[0]instanceof kp)return function(t,e,n,r,i){if(!r)throw new Ii(Ei.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ts(t);s<a.length;s++){var u=a[s];if(u.field.ht())o.push(lo(e,r.key));else{var c=r.field(u.field);if(Zi(c))throw new Ii(Ei.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.ot();throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new qo(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=Vl(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new Ii(Ei.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ht()){if("string"!=typeof c)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Zo(t)&&-1!==c.indexOf("/"))throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Fi.ct(c));if(!Bi.Et(h))throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new Bi(h);a.push(lo(e,f))}else{var l=Wl(n,r,c);a.push(l)}}return new qo(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function jp(t,e,n){if(n instanceof ki&&(n=n._),"string"==typeof n){if(""===n)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zo(e)&&-1!==n.indexOf("/"))throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Fi.ct(n));if(!Bi.Et(r))throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return lo(t,new Bi(r))}if(n instanceof Tl)return lo(t,n.S_);throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+gl(n)+".")}function Vp(t,e){if(!Array.isArray(t)||0===t.length)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Up(t,e,n){if(!n.isEqual(e))throw new Ii(Ei.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function qp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function Fp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var zp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return o(e,t),e.prototype.Uf=function(t){return new Ti(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Tl(this.firestore,null,e)},e}(Tp),Hp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Bp=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).zf=e,a.ad=e,a.metadata=o,a}return o(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Gp(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Np("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(kp),Gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Bp),Kp=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Hp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new Gp(n.zf,n.Hf,r.key,r,new Hp(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new Ii(Ei.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){var r=new Gp(t.zf,t.Hf,e.doc.key,e.doc,new Hp(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Gp(t.zf,t.Hf,e.doc.key,e.doc,new Hp(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Jp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function Jp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pi()}}function Wp(t,e){return t instanceof Bp&&e instanceof Bp?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof Kp&&e instanceof Kp&&t.zf===e.zf&&Ol(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var Yp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return o(e,t),e.prototype.Uf=function(t){return new Ti(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Tl(this.firestore,null,e)},e}(Tp);function Xp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=bl(t,Tl);var o=bl(t.firestore,bp),s=Vl(o);return e instanceof ki&&(e=e._),Qp(o,[("string"==typeof e||e instanceof fl?Jl(s,"updateDoc",t.S_,e,n,r):Kl(s,"updateDoc",t.S_,e)).O_(t.S_,Ns.exists(!0))])}function $p(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof ki&&(t=t._);var s={includeMetadataChanges:!1},c=0;"object"!=typeof i[c]||qp(i[c])||(s=i[c],c++);var h,f,l,p={includeMetadataChanges:s.includeMetadataChanges};if(qp(i[c])){var d=i[c];i[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[c+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[c+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Tl)f=bl(t.firestore,bp),l=Wo(t.S_.path),h={next:function(e){i[c]&&i[c](Zp(f,t,e))},error:i[c+1],complete:i[c+2]};else{var v=bl(t,kl);f=bl(v.firestore,bp),l=v.C_;var y=new Yp(f);h={next:function(t){i[c]&&i[c](new Kp(f,y,v,t))},error:i[c+1],complete:i[c+2]},Sp(t.C_)}return function(t,e,n,r){var i=this,o=new hl(r),s=new wf(e,o,n);return t.fs.ys((function(){return a(i,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=vf,[4,vp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.r_(),t.fs.ys((function(){return a(i,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=yf,[4,vp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(wp(f),l,p,h)}function Qp(t,e){return function(t,e){var n=this,r=new eu;return t.fs.ys((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return n=Cf,[4,dp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(wp(t),e)}function Zp(t,e,n){var r=n.docs.get(e.S_),i=new Yp(t);return new Bp(t,i,e.S_,r,new Hp(n.hasPendingWrites,n.fromCache),e.v_)}var td=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Vl(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=ed(t,this.zf),i=Fp(r.v_,e,n),o=Ul(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.O_(r.S_,Ns.jt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=ed(t,this.zf);return e instanceof ki&&(e=e._),o="string"==typeof e||e instanceof fl?Jl(this.wd,"WriteBatch.update",s.S_,e,n,r):Kl(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.O_(s.S_,Ns.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=ed(t,this.zf);return this.fd=this.fd.concat(new Hs(e.S_,Ns.jt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new Ii(Ei.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function ed(t,e){if(t instanceof ki&&(t=t._),t.firestore!==e)throw new Ii(Ei.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var nd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return o(e,t),e.prototype.get=function(e){var n=this,r=ed(e,this.zf),i=new Yp(this.zf);return t.prototype.get.call(this,e).then((function(t){return new Bp(n.zf,i,r.S_,t.Jf,new Hp(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Vl(t)}return t.prototype.get=function(t){var e=this,n=ed(t,this.zf),r=new zp(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return pi();var i=t[0];if(i instanceof To)return new kp(e.zf,r,n.S_,null,n.v_);if(i instanceof Io)return new kp(e.zf,r,i.key,i,n.v_);throw pi()}))},t.prototype.set=function(t,e,n){var r=ed(t,this.zf),i=Fp(r.v_,e,n),o=Ul(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=ed(t,this.zf);return e instanceof ki&&(e=e._),o="string"==typeof e||e instanceof fl?Jl(this.wd,"Transaction.update",s.S_,e,n,r):Kl(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=ed(t,this.zf);return this.Td.delete(e.S_),this},t}()),rd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Ip(t=bl(t,bp));var n=wp(t),r=t.p_(),i=new cl;return Ep(n,i,new al(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Ip(t=bl(t,bp));var e=wp(t),n=t.p_(),r=new cl;return Ep(e,r,new ul(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Ii(Ei.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new eu;return t.Mf.Tf((function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return iu.jn()?(e=t+"main",[4,iu.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Uc(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),id=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Oi||(i.md=e),i}return o(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=bl(t,Il)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&fi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return a(e,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,fp(t)];case 1:return e=r.sent(),[4,pp(t)];case 2:return n=r.sent(),[2,(e.Vo(!0),function(t){var e=vi(t);return e.Oh.delete(0),Fh(e)}(n))]}}))}))}))}(wp(bl(this._,bp)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return a(e,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,fp(t)];case 1:return e=r.sent(),[4,pp(t)];case 2:return n=r.sent(),[2,(e.Vo(!1),function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return(e=vi(t)).Oh.add(0),[4,zh(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(wp(bl(this._,bp)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&vl("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new eu;return t.fs.ys((function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(r){switch(r.label){case 0:return e=Vf,[4,dp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(wp(bl(this._,bp)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new hl(e);return t.fs.ys((function(){return a(n,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=function(t,e){vi(t).Wh.add(e),e.next()},[4,vp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return a(n,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=function(t,e){vi(t).Wh.delete(e)},[4,vp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(wp(t=bl(t,bp)),qp(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new Ii(Ei.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new md(this,Nl(this._,t))}catch(t){throw cd(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new ud(this,Sl(this._,t))}catch(t){throw cd(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new dd(this,function(t,e){if(t=bl(t,Il),pl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new kl(t,null,function(t){return new Ko(Fi.at(),t)}(e))}(this._,t))}catch(t){throw cd(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new eu;return t.fs.ys((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return[4,function(t){return hp(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new op(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(wp(t),(function(n){return e(new nd(t,n))}))}(this._,(function(n){return t(new sd(e,n))}))},e.prototype.batch=function(){var t=this;return wp(this._),new ad(new td(this._,(function(e){return Qp(t._,e)})))},e.prototype.loadBundle=function(t){throw new Ii(Ei.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Ii(Ei.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(ki),od=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return o(e,t),e.prototype.Uf=function(t){return new Si(new Ti(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return ud.Ad(e,this.firestore,null)},e}(Tp),sd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r.Hf=new od(e),r}return o(e,t),e.prototype.get=function(t){var e=this,n=gd(t);return this._.get(n).then((function(t){return new ld(e.zf,new Bp(e.zf._,e.Hf,t.S_,t.Jf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=gd(t);return n?(dl("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=gd(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,l([s,e,n],i)),this},e.prototype.delete=function(t){var e=gd(t);return this._.delete(e),this},e}(ki),ad=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.set=function(t,e,n){var r=gd(t);return n?(dl("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=gd(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,l([s,e,n],i)),this},e.prototype.delete=function(t){var e=gd(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(ki),ud=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new od(e),r}return o(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new Ii(Ei.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new e(n,new Tl(n._,r,new Bi(t)))},e.Ad=function(t,n,r){return new e(n,new Tl(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new md(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new md(this.firestore,Nl(this._,t))}catch(t){throw cd(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof ki&&(t=t._),t instanceof Tl&&Al(this._,t)},e.prototype.set=function(t,e){e=dl("DocumentReference.set",e);try{return function(t,e,n){t=bl(t,Tl);var r=bl(t.firestore,bp),i=Fp(t.v_,e,n);return Qp(r,[Ul(Vl(r),"setDoc",t.S_,i,null!==t.v_,n).O_(t.S_,Ns.jt())])}(this._,t,e)}catch(t){throw cd(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Xp(this._,t):Xp.apply(void 0,l([this._,t,e],n))}catch(t){throw cd(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Qp(bl((t=this._).firestore,bp),[new Hs(t.S_,Ns.jt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=hd(e),i=fd(e,(function(e){return new ld(t.firestore,new Bp(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return $p(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=bl(t,Tl);var e=bl(t.firestore,bp),n=wp(e),r=new Yp(e);return function(t,e){var n=this,r=new eu;return t.fs.ys((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=vi(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Io?n.resolve(i):i instanceof To?n.resolve(null):n.reject(new Ii(Ei.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=pu(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,lp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Bp(e,r,t.S_,n,new Hp(n instanceof Io&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=bl(t,Tl);var e=bl(t.firestore,bp);return yp(wp(e),t.S_,{source:"server"}).then((function(n){return Zp(e,t,n)}))}(this._):function(t){t=bl(t,Tl);var e=bl(t.firestore,bp);return yp(wp(e),t.S_).then((function(n){return Zp(e,t,n)}))}(this._)).then((function(t){return new ld(e.firestore,new Bp(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(ki);function cd(t,e,n){return t.message=t.message.replace(e,n),t}function hd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!qp(r))return r}return{}}function fd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=qp(t[0])?t[0]:qp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ld=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return o(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new ud(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return Wp(this._,t._)},e}(ki),pd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.data=function(t){return this._.data(t)},e}(ld),dd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new od(e),r}return o(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Op(this._,function(t,e,n){var r=e,i=Np("where",t);return new Dp(i,r,n)}(t,n,r)))}catch(t){throw cd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Op(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Np("orderBy",t);return new Cp(r,n)}(t,n)))}catch(t){throw cd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Op(this._,function(t){return wl("limit",t),new Pp("limit",t,"F")}(t)))}catch(t){throw cd(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Op(this._,function(t){return wl("limitToLast",t),new Pp("limitToLast",t,"L")}(t)))}catch(t){throw cd(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Op(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lp("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw cd(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Op(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lp("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw cd(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Op(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rp("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw cd(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Op(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rp("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw cd(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Ol(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=bl(t,kl);var e=bl(t.firestore,bp),n=wp(e),r=new Yp(e);return function(t,e){var n=this,r=new eu;return t.fs.ys((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s,a;return u(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,th(t,e,!0)];case 1:return a=u.sent(),r=new kf(e,a.Pc),i=r.dl(a.documents),o=r.Ei(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=pu(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,lp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Kp(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=bl(t,kl);var e=bl(t.firestore,bp),n=wp(e),r=new Yp(e);return mp(n,t.C_,{source:"server"}).then((function(n){return new Kp(e,r,t,n)}))}(this._):function(t){t=bl(t,kl);var e=bl(t.firestore,bp),n=wp(e),r=new Yp(e);return Sp(t.C_),mp(n,t.C_).then((function(n){return new Kp(e,r,t,n)}))}(this._)).then((function(t){return new yd(e.firestore,new Kp(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=hd(e),i=fd(e,(function(e){return new yd(t.firestore,new Kp(t.firestore._,t.Hf,t._,e.ud))}));return $p(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(ki),vd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return o(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new pd(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(ki),yd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return o(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new dd(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new pd(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new vd(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new pd(n.zf,r))}))},e.prototype.isEqual=function(t){return Wp(this._,t._)},e}(ki),md=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new ud(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new ud(this.firestore,void 0===t?Sl(this._):Sl(this._,t))}catch(t){throw cd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=bl(t.firestore,bp),r=Sl(t),i=Fp(t.v_,e);return Qp(n,[Ul(Vl(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).O_(r.S_,Ns.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new ud(e.firestore,t)}))},e.prototype.isEqual=function(t){return Al(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(dd);function gd(t){return t instanceof ki&&(t=t._),bl(t,Tl)}var bd=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(fl.bind.apply(fl,l([void 0],e))))||this}return o(e,t),e.documentId=function(){return new e(Hi.lt().ot())},e.prototype.isEqual=function(t){return t instanceof ki&&(t=t._),t instanceof fl&&this._.d_.isEqual(t.d_)},e}(ki),wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.serverTimestamp=function(){var t=new zl("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new ql("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hl("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bl("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Gl("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(ki);!function(){function t(){this.Pd={},this.yd=new eu,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.jl=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.Ql=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)}}();var _d,Ed={Firestore:id,GeoPoint:Dl,Timestamp:Vi,Blob:Si,Transaction:sd,WriteBatch:ad,DocumentReference:ud,DocumentSnapshot:ld,Query:dd,QueryDocumentSnapshot:pd,QuerySnapshot:yd,CollectionReference:md,FieldPath:bd,FieldValue:wd,setLogLevel:function(t){var e;e=t,ai.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new x("firestore",(function(t){return function(t,e){return new id(t,new bp(t,e),new rd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Ed)))})(_d=tt),_d.registerVersion("@firebase/firestore","2.1.2");var Id=n(324);const Td=t=>{var e=document.createElement("div");return e.id=t,e},kd=(t,e=!0)=>{var n=document.createElement("input");return n.type="text",n.id=t.replace(" ","-"),n.setAttribute("name",t.replace(" ","-")),e&&(n.placeholder=`enter ${t}`.toUpperCase()),n},xd=t=>{var e=document.createElement("button");return e.classList.add("btn"),e.innerText=t.toUpperCase(),e};tt.initializeApp({apiKey:"AIzaSyBpfldqu40PdUQchxvlUh33EUK9S91bTLo",authDomain:"trivia-b67e1.firebaseapp.com",databaseURL:"https://trivia-b67e1-default-rtdb.firebaseio.com",projectId:"trivia-b67e1",storageBucket:"trivia-b67e1.appspot.com",messagingSenderId:"734274771672",appId:"1:734274771672:web:afc2aa6c6e46b3271255ad",measurementId:"G-PLJFMDYJP5"});const Nd=tt.firestore().collection("games"),Sd=t=>Nd.doc(t.toLowerCase()),Ad=t=>Sd(t.toLowerCase()).collection("players"),Od=(t,e)=>(t=t.toLowerCase(),Sd(t).set({current_question:e},{merge:!0})),Dd=({id:t,username:e})=>Ad(t).doc(e).update({online:!1}),Cd=n.p+"44f3aa07b8b63452b0a46cbd5bf48c99.flac",Pd=n.p+"e646beac15023b51e3cfe386e83f4269.mp3",Ld=n.p+"8ef99d0d2b2b389f2c35940aef420ade.wav",Rd=n.p+"b7507087df982ffbfc1a4714d957d415.mp3",Md=n.p+"4edd5b2e303643833df57fd938e8bb9b.mp3",jd=n.p+"772e2e583b24716421eb1cc67256264e.wav",Vd=window.speechSynthesis,Ud=t=>new Promise(((e,n)=>{Vd.cancel(),new Promise(((t,e)=>{let n;n=setInterval((()=>{0!==Vd.getVoices().length&&(t(Vd.getVoices()),clearInterval(n))}),10)})).then((n=>{var r=n.filter((function(t){return"Google UK English Female"===t.name}))[0],i=new SpeechSynthesisUtterance(t);i.volume=1,i.voice=r,i.text=t,i.lang="en-US",Vd.speak(i),i.onend=()=>{e()}}))})),qd=t=>Ud(`${t} has joined the game.`),Fd=(t,e)=>{(({id:t,username:e})=>(t=t.toLowerCase(),Sd(t).get().then((n=>n.exists?Ad(t).doc(e).get().then((t=>t.exists?t.data().online?Promise.reject("Username is taken"):t.ref.update({online:!0}):t.ref.set({username:e,score:0,online:!0}))):Promise.reject("Game does not exist")))))({id:t=t.toLowerCase(),username:e}).then((()=>{(()=>{const t=new Audio(Pd);t.loop=!0;try{t.play()}catch{console.error("Audio disabled")}})(),window.onbeforeunload=()=>{Dd({id:t,username:e})},vy("lobby",{id:t,username:e})})).catch((t=>{document.getElementById("error").innerText=t}))},zd=()=>{const t="host";(async t=>{for(var e,n;!n;)e=Id({exactly:1,wordsPerString:2,maxLength:4,separator:"-"})[0],n=!(await Sd(e).get()).exists;const r=await fetch("https://opentdb.com/api.php?amount=10").then((t=>t.json())).then((t=>t.results)).catch((t=>console.error(t)));return Sd(e).set({id:e,questions:r,host:t,current_question:null}).then((()=>e)).catch((t=>console.error(t)))})(t).then((e=>{Fd(e,t)}))},Hd="container",Bd="question-container";function Gd(t){return(Gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Jd(t,e,n[e])}))}return t}function Yd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Xd=function(){},$d={},Qd={},Zd={mark:Xd,measure:Xd};try{"undefined"!=typeof window&&($d=window),"undefined"!=typeof document&&(Qd=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&(Zd=performance)}catch(_d){}var tv=($d.navigator||{}).userAgent,ev=void 0===tv?"":tv,nv=$d,rv=Qd,iv=Zd,ov=(nv.document,!!rv.documentElement&&!!rv.head&&"function"==typeof rv.addEventListener&&"function"==typeof rv.createElement),sv=(~ev.indexOf("MSIE")||ev.indexOf("Trident/"),"svg-inline--fa"),av=[1,2,3,4,5,6,7,8,9,10],uv=av.concat([11,12,13,14,15,16,17,18,19,20]),cv={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},hv=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",cv.GROUP,cv.SWAP_OPACITY,cv.PRIMARY,cv.SECONDARY].concat(av.map((function(t){return"".concat(t,"x")}))).concat(uv.map((function(t){return"w-".concat(t)}))),nv.FontAwesomeConfig||{});rv&&"function"==typeof rv.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(t){var e=Yd(t,2),n=e[0],r=e[1],i=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var e=rv.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}(n));null!=i&&(hv[r]=i)}));var fv=Wd({},{familyPrefix:"fa",replacementClass:sv,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},hv);fv.autoReplaceSvg||(fv.observeMutations=!1);var lv=Wd({},fv);nv.FontAwesomeConfig=lv;var pv=nv||{};pv.___FONT_AWESOME___||(pv.___FONT_AWESOME___={}),pv.___FONT_AWESOME___.styles||(pv.___FONT_AWESOME___.styles={}),pv.___FONT_AWESOME___.hooks||(pv.___FONT_AWESOME___.hooks={}),pv.___FONT_AWESOME___.shims||(pv.___FONT_AWESOME___.shims=[]);var dv=pv.___FONT_AWESOME___,vv=[];ov&&((rv.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(rv.readyState)||rv.addEventListener("DOMContentLoaded",(function t(){rv.removeEventListener("DOMContentLoaded",t),vv.map((function(t){return t()}))})));var yv,mv="pending",gv="settled",bv="fulfilled",wv="rejected",_v=function(){},Ev=void 0!==n.g&&void 0!==n.g.process&&"function"==typeof n.g.process.emit,Iv="undefined"==typeof setImmediate?setTimeout:setImmediate,Tv=[];function kv(){for(var t=0;t<Tv.length;t++)Tv[t][0](Tv[t][1]);Tv=[],yv=!1}function xv(t,e){Tv.push([t,e]),yv||(yv=!0,Iv(kv,0))}function Nv(t){var e=t.owner,n=e._state,r=e._data,i=t[n],o=t.then;if("function"==typeof i){n=bv;try{r=i(r)}catch(t){Dv(o,t)}}Sv(o,r)||(n===bv&&Av(o,r),n===wv&&Dv(o,r))}function Sv(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===Gd(e))){var r=e.then;if("function"==typeof r)return r.call(e,(function(r){n||(n=!0,e===r?Ov(t,r):Av(t,r))}),(function(e){n||(n=!0,Dv(t,e))})),!0}}catch(e){return n||Dv(t,e),!0}return!1}function Av(t,e){t!==e&&Sv(t,e)||Ov(t,e)}function Ov(t,e){t._state===mv&&(t._state=gv,t._data=e,xv(Pv,t))}function Dv(t,e){t._state===mv&&(t._state=gv,t._data=e,xv(Lv,t))}function Cv(t){t._then=t._then.forEach(Nv)}function Pv(t){t._state=bv,Cv(t)}function Lv(t){t._state=wv,Cv(t),!t._handled&&Ev&&n.g.process.emit("unhandledRejection",t._data,t)}function Rv(t){n.g.process.emit("rejectionHandled",t)}function Mv(t){if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");if(this instanceof Mv==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(t,e){function n(t){Dv(e,t)}try{t((function(t){Av(e,t)}),n)}catch(t){n(t)}}(t,this)}Mv.prototype={constructor:Mv,_state:mv,_then:null,_data:void 0,_handled:!1,then:function(t,e){var n={owner:this,then:new this.constructor(_v),fulfilled:t,rejected:e};return!e&&!t||this._handled||(this._handled=!0,this._state===wv&&Ev&&xv(Rv,this)),this._state===bv||this._state===wv?xv(Nv,n):this._then.push(n),n.then},catch:function(t){return this.then(null,t)}},Mv.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new Mv((function(e,n){var r=[],i=0;function o(t){return i++,function(n){r[t]=n,--i||e(r)}}for(var s,a=0;a<t.length;a++)(s=t[a])&&"function"==typeof s.then?s.then(o(a),n):r[a]=s;i||e(r)}))},Mv.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new Mv((function(e,n){for(var r,i=0;i<t.length;i++)(r=t[i])&&"function"==typeof r.then?r.then(e,n):e(r)}))},Mv.resolve=function(t){return t&&"object"===Gd(t)&&t.constructor===Mv?t:new Mv((function(e){e(t)}))},Mv.reject=function(t){return new Mv((function(e,n){n(t)}))};var jv={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Vv(){for(var t=12,e="";t-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function Uv(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function qv(t){return Object.keys(t||{}).reduce((function(e,n){return e+"".concat(n,": ").concat(t[n],";")}),"")}function Fv(t){return t.size!==jv.size||t.x!==jv.x||t.y!==jv.y||t.rotate!==jv.rotate||t.flipX||t.flipY}function zv(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(32*e.x,", ").concat(32*e.y,") "),s="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(o," ").concat(s," ").concat(a)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var Hv={x:0,y:0,width:"100%",height:"100%"};function Bv(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function Gv(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,o=t.iconName,s=t.transform,a=t.symbol,u=t.title,c=t.maskId,h=t.titleId,f=t.extra,l=t.watchable,p=void 0!==l&&l,d=r.found?r:n,v=d.width,y=d.height,m="fak"===i,g=m?"":"fa-w-".concat(Math.ceil(v/y*16)),b=[lv.replacementClass,o?"".concat(lv.familyPrefix,"-").concat(o):"",g].filter((function(t){return-1===f.classes.indexOf(t)})).filter((function(t){return""!==t||!!t})).concat(f.classes).join(" "),w={children:[],attributes:Wd({},f.attributes,{"data-prefix":i,"data-icon":o,class:b,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(y)})},_=m&&!~f.classes.indexOf("fa-fw")?{width:"".concat(v/y*16*.0625,"em")}:{};p&&(w.attributes["data-fa-i2svg"]=""),u&&w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(h||Vv())},children:[u]});var E=Wd({},w,{prefix:i,iconName:o,main:n,mask:r,maskId:c,transform:s,symbol:a,styles:Wd({},_,f.styles)}),I=r.found&&n.found?function(t){var e,n=t.children,r=t.attributes,i=t.main,o=t.mask,s=t.maskId,a=t.transform,u=i.width,c=i.icon,h=o.width,f=o.icon,l=zv({transform:a,containerWidth:h,iconWidth:u}),p={tag:"rect",attributes:Wd({},Hv,{fill:"white"})},d=c.children?{children:c.children.map(Bv)}:{},v={tag:"g",attributes:Wd({},l.inner),children:[Bv(Wd({tag:c.tag,attributes:Wd({},c.attributes,l.path)},d))]},y={tag:"g",attributes:Wd({},l.outer),children:[v]},m="mask-".concat(s||Vv()),g="clip-".concat(s||Vv()),b={tag:"mask",attributes:Wd({},Hv,{id:m,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,y]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:g},children:(e=f,"g"===e.tag?e.children:[e])},b]};return n.push(w,{tag:"rect",attributes:Wd({fill:"currentColor","clip-path":"url(#".concat(g,")"),mask:"url(#".concat(m,")")},Hv)}),{children:n,attributes:r}}(E):function(t){var e=t.children,n=t.attributes,r=t.main,i=t.transform,o=qv(t.styles);if(o.length>0&&(n.style=o),Fv(i)){var s=zv({transform:i,containerWidth:r.width,iconWidth:r.width});e.push({tag:"g",attributes:Wd({},s.outer),children:[{tag:"g",attributes:Wd({},s.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:Wd({},r.icon.attributes,s.path)}]}]})}else e.push(r.icon);return{children:e,attributes:n}}(E),T=I.children,k=I.attributes;return E.children=T,E.attributes=k,a?function(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,o=t.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Wd({},i,{id:!0===o?"".concat(e,"-").concat(lv.familyPrefix,"-").concat(n):o}),children:r}]}]}(E):function(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,o=t.styles,s=t.transform;if(Fv(s)&&n.found&&!r.found){var a={x:n.width/n.height/2,y:.5};i.style=qv(Wd({},o,{"transform-origin":"".concat(a.x+s.x/16,"em ").concat(a.y+s.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}(E)}var Kv=(lv.measurePerformance&&iv&&iv.mark&&iv.measure,function(t,e,n,r){var i,o,s,a=Object.keys(t),u=a.length,c=void 0!==r?function(t,e){return function(n,r,i,o){return t.call(e,n,r,i,o)}}(e,r):e;for(void 0===n?(i=1,s=t[a[0]]):(i=0,s=n);i<u;i++)s=c(s,t[o=a[i]],o,t);return s});function Jv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,o=Object.keys(e).reduce((function(t,n){var r=e[n];return r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{});"function"!=typeof dv.hooks.addPack||i?dv.styles[t]=Wd({},dv.styles[t]||{},o):dv.hooks.addPack(t,o),"fas"===t&&Jv("fa",e)}var Wv=dv.styles,Yv=dv.shims,Xv=function(){var t=function(t){return Kv(Wv,(function(e,n,r){return e[r]=Kv(n,t,{}),e}),{})};t((function(t,e,n){return e[3]&&(t[e[3]]=n),t})),t((function(t,e,n){var r=e[2];return t[n]=n,r.forEach((function(e){t[e]=n})),t}));var e="far"in Wv;Kv(Yv,(function(t,n){var r=n[0],i=n[1],o=n[2];return"far"!==i||e||(i="fas"),t[r]={prefix:i,iconName:o},t}),{})};function $v(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}function Qv(t){var e=t.tag,n=t.attributes,r=void 0===n?{}:n,i=t.children,o=void 0===i?[]:i;return"string"==typeof t?Uv(t):"<".concat(e," ").concat(function(t){return Object.keys(t||{}).reduce((function(e,n){return e+"".concat(n,'="').concat(Uv(t[n]),'" ')}),"").trim()}(r),">").concat(o.map(Qv).join(""),"</").concat(e,">")}function Zv(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}Xv(),dv.styles,Zv.prototype=Object.create(Error.prototype),Zv.prototype.constructor=Zv;var ty={fill:"currentColor"},ey={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},ny=(Wd({},ty,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),Wd({},ey,{attributeName:"opacity"}));function ry(t){var e=t[0],n=t[1],r=Yd(t.slice(4),1)[0];return{found:!0,width:e,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(lv.familyPrefix,"-").concat(cv.GROUP)},children:[{tag:"path",attributes:{class:"".concat(lv.familyPrefix,"-").concat(cv.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(lv.familyPrefix,"-").concat(cv.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}function iy(){lv.autoAddCss&&!cy&&(function(t){if(t&&ov){var e=rv.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=rv.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],s=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(r=o)}rv.head.insertBefore(e,r)}}(function(){var t="fa",e=sv,n=lv.familyPrefix,r=lv.replacementClass,i='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if(n!==t||r!==e){var o=new RegExp("\\.".concat(t,"\\-"),"g"),s=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(o,".".concat(n,"-")).replace(s,"--".concat(n,"-")).replace(a,".".concat(r))}return i}()),cy=!0)}function oy(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map((function(t){return Qv(t)}))}}),Object.defineProperty(t,"node",{get:function(){if(ov){var e=rv.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function sy(t){var e=t.prefix,n=void 0===e?"fa":e,r=t.iconName;if(r)return $v(uy.definitions,n,r)||$v(dv.styles,n,r)}Wd({},ty,{cx:"256",cy:"364",r:"28"}),Wd({},ey,{attributeName:"r",values:"28;14;28;28;14;28;"}),Wd({},ny,{values:"1;0;1;1;0;1;"}),Wd({},ty,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Wd({},ny,{values:"1;0;0;0;0;1;"}),Wd({},ty,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Wd({},ny,{values:"0;0;1;1;0;0;"}),dv.styles,dv.styles;var ay,uy=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.definitions={}}var e,n;return e=t,(n=[{key:"add",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(e){t.definitions[e]=Wd({},t.definitions[e]||{},i[e]),Jv(e,i[e]),Xv()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var n=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(n).map((function(e){var r=n[e],i=r.prefix,o=r.iconName,s=r.icon;t[i]||(t[i]={}),t[i][o]=s})),t}}])&&Kd(e.prototype,n),t}()),cy=!1,hy=(ay=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.transform,r=void 0===n?jv:n,i=e.symbol,o=void 0!==i&&i,s=e.mask,a=void 0===s?null:s,u=e.maskId,c=void 0===u?null:u,h=e.title,f=void 0===h?null:h,l=e.titleId,p=void 0===l?null:l,d=e.classes,v=void 0===d?[]:d,y=e.attributes,m=void 0===y?{}:y,g=e.styles,b=void 0===g?{}:g;if(t){var w=t.prefix,_=t.iconName,E=t.icon;return oy(Wd({type:"icon"},t),(function(){return iy(),lv.autoA11y&&(f?m["aria-labelledby"]="".concat(lv.replacementClass,"-title-").concat(p||Vv()):(m["aria-hidden"]="true",m.focusable="false")),Gv({icons:{main:ry(E),mask:a?ry(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:_,transform:Wd({},jv,r),symbol:o,title:f,maskId:c,titleId:p,extra:{attributes:m,styles:b,classes:v}})}))}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t||{}).icon?t:sy(t||{}),r=e.mask;return r&&(r=(r||{}).icon?r:sy(r||{})),ay(n,Wd({},e,{mask:r}))});uy.add({prefix:"fas",iconName:"door-open",icon:[640,512,[],"f52b","M624 448h-80V113.45C544 86.19 522.47 64 496 64H384v64h96v384h144c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM312.24 1.01l-192 49.74C105.99 54.44 96 67.7 96 82.92V448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h336V33.18c0-21.58-19.56-37.41-39.76-32.17zM264 288c-13.25 0-24-14.33-24-32s10.75-32 24-32 24 14.33 24 32-10.75 32-24 32z"]});const fy=hy({prefix:"fas",iconName:"door-open"}).html,ly=function(t=0){this.duration=t,this.timeLeft=this.duration,this.interval=()=>{},this.timerEl=document.createElement("div"),this.timerEl.id="timer",this.timerEl.innerText=this.timeLeft,this.setDuration=t=>{this.duration=t,this.timeLeft=t},this.start=(t=this.duration)=>{this.interval=setInterval((()=>{this.timeLeft>0?(11===this.timeLeft&&(()=>{const t=new Audio(Cd);try{t.play()}catch{console.error("Audio disabled")}})(),this.timeLeft--,this.timerEl.innerText=this.timeLeft):(this.stop(),this.timeoutListener())}),1e3)},this.stop=()=>{clearInterval(this.interval),this.reset()},this.pause=()=>{clearInterval(this.interval)},this.reset=()=>{this.timeLeft=this.duration},this.render=()=>{document.getElementById(Hd).append(this.timerEl)},this.timeoutListener=function(t){},this.ontimeout=function(t){this.timeoutListener=t}},py={landing:function(){var t=Td("landing"),e=kd("username"),n=document.createElement("div");n.id="game-code-container";var r=kd("gameCode1",!1),i=kd("gameCode2",!1),o=document.createElement("div");o.innerText="-",o.classList.add("separator"),n.append(r,o,i);var s=xd("join");s.onclick=()=>Fd(`${r.value}-${i.value}`,e.value);var a=document.createElement("div");a.id="error";var u=document.createElement("div");u.innerText="- OR -",u.classList.add("separator");var c=xd("create");return c.onclick=zd,t.append(e,n,s,a,u,c),t},lobby:function({id:t,username:e}){t=t.toLowerCase();const n=Td("lobby"),r=document.getElementById(Hd),i=document.createElement("div");i.id="exit",i.innerHTML=fy,i.onclick=()=>{d(),l(),Dd({id:t,username:e}),vy("landing")},r.append(i);const o=document.createElement("div");o.id="subtitle",o.innerText="Waiting on players...";const s=document.createElement("div");s.id="game-id",s.innerText=t.toUpperCase();const a=document.createElement("ol");a.id="player-list";const u=({username:t,score:e})=>{const n=((t,e)=>{const n=document.createElement("li");n.setAttribute("name",t);const r=document.createElement("div");r.className="username",r.innerText=t;const i=document.createElement("div");return i.className="score",i.innerText=e,n.append(r,i),n})(t,e);a.append(n)},c=()=>{const t=Array.from(a.children).sort(((t,e)=>parseInt(e.lastChild.innerText)-parseInt(t.lastChild.innerText)));for(;a.firstChild;)a.removeChild(a.firstChild);t.forEach((t=>a.append(t)))};var h=!0,f=[];const l=Ad(t).onSnapshot((t=>{t.docChanges().forEach((function(t){const e=t.doc.data();"added"===t.type&&(h||qd(e.username),e.online&&(u(e),f.push(e.username))),"modified"===t.type&&(e.online&&!f.includes(e.username)?(u(e),qd(e.username),f.push(e.username)):!e.online&&f.includes(e.username)?((({username:t})=>{document.getElementsByName(t)[0].remove()})(e),(t=>{Ud(`${t} has left the game.`)})(e.username),f.splice(f.indexOf(e.username),1)):((({username:t,score:e})=>{document.getElementsByName(t)[0].getElementsByClassName("score")[0].innerText=e})(e),c()))})),h=!1}));var p=-1;const d=Sd(t).onSnapshot((n=>{-1!==p?(vy("question",{id:t,username:e}),l(),d()):p=n.data().current_question}));return Sd(t).get().then((r=>{const i=e===r.data().host,u=null!==r.data().current_question&&r.data().current_question>=0,h=r.data().current_question===r.data().questions.length-1;if(u)n.append(s,a),c(),r.ref.collection("players").orderBy("score","desc").get().then((t=>{const e=t.docs.map((t=>({username:t.id,score:t.data().score})));return h?((t,e)=>{var n,r=[];const i=t[0].score>0?t[0]:null;if(i){r.push(i);const e=t[1].score>0?t[1]:null;if(i&&e&&i.score===e.score){const e=t.filter((t=>t.score===i.score));r=r.concat(e);var o=e.slice(0,e.length-1).map((t=>t.username)).join(", ")+" and "+e[e.length-1].username;n=`We've got a tie for first! ${o} win with a score of ${e[0].score}.`}else n=`${i.username} is our winner! Way to go!`}else n="nobody!";return Ud("And that was our final question. The winner of today's trivia game is...").then((()=>{const t=new Audio(jd);try{t.play()}catch{console.error("Audio disabled")}t.onended=()=>{const t=new Audio(Md);try{t.play()}catch{console.error("Audio disabled")}return Ud(n)}}))})(e):Promise.resolve()})).then((()=>{i&&!h&&setTimeout((()=>{Od(t,r.data().current_question+1)}),5e3)}));else if(i?((t,e)=>{Ud(`Welcome to trivia ${t}! Your game code is ${e}. Share this code with your friends and press start when everybody has joined.`)})(e,t):(t=>{Ud(`Welcome to trivia ${t}! The game will start whenever the host is ready. Hang tight!`)})(e),n.append(s,o,a),r.data().host===e){var f=xd("start");f.onclick=()=>{Od(t,0)},n.append(f)}else{var l=document.createElement("div");l.innerText="Please wait for host to start game",n.append(l)}})),n},question:function({id:t,username:e}){var n=document.createElement("div");n.id=Bd;const r=t=>{const e=document.getElementById(t);var n=9,r=setInterval((()=>{n>0?(e.checked=!e.checked,n--):clearInterval(r)}),100)};var i;const o=new ly(15);return o.render(),o.ontimeout((()=>{const n=document.querySelectorAll('input[name="answers"]');var o=!1;return n.forEach((t=>{t.checked&&t.id===i&&(o=!0)})),((t,e,n)=>Ud("Time's up! The correct answer is").then((()=>{const r=e?new Audio(Ld):new Audio(Rd);try{r.play()}catch{console.error("Audio disabled")}return n(t),Ud(t)})).then((()=>Ud(e?"Nice job!":"Sorry... maybe next time"))))(i,o,r).then((()=>(({id:t,username:e,amount:n})=>(t=t.toLowerCase(),Ad(t).doc(e).update({score:tt.firestore.FieldValue.increment(n)})))({id:t,username:e,amount:o?10:0}))).then((()=>{vy("lobby",{id:t,username:e})}))})),Sd(t).get().then((t=>{const e=t.data().current_question,n=t.data().questions[e];i=n.correct_answer,(t=>{const e=(t=>{const e=t.incorrect_answers.concat(t.correct_answer);return e.sort((()=>Math.random()-.5)),e})(t);var n=document.getElementById(Bd),r=document.createElement("div");r.className="btn-group-vertical",r.setAttribute("name","answers"),r.innerHTML=`<div class="question-text">${t.question}</div>`,e.forEach((t=>{var e=document.createElement("input");e.type="radio",e.className="btn-check",e.setAttribute("name","answers"),e.id=t;var n=document.createElement("label");n.className="btn btn-outline-primary",n.htmlFor=e.id,n.innerHTML=t.toString(),r.append(e,n)})),n.append(r),document.getElementById(Hd).append(n)})(n),n.question,Ud(`Question ${e+1}...`),o.start()})),n}},dy=document.getElementById(Hd),vy=(t,e)=>{for(;dy.firstChild;)dy.removeChild(dy.firstChild);dy.appendChild(py[t](e))};$(document).ready((function(){vy("landing")}))})()})();